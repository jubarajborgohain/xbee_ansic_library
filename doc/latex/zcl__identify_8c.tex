\hypertarget{zcl__identify_8c}{\section{src/zigbee/zcl\-\_\-identify.c File Reference}
\label{zcl__identify_8c}\index{src/zigbee/zcl\-\_\-identify.\-c@{src/zigbee/zcl\-\_\-identify.\-c}}
}


Server code to implement the Zig\-Bee Identify Cluster (Z\-C\-L Spec section 3.\-5).  


{\ttfamily \#include \char`\"{}xbee/platform.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}xbee/byteorder.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}zigbee/zcl.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}zigbee/zcl\-\_\-identify.\-h\char`\"{}}\\*
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{group__hal_ga5a8b2dc9e45a9ee81a94ef304fb62505}{uint16\-\_\-t} \hyperlink{group__zcl__identify_ga95b00d55b861c1ea6033c16794ae818d}{zcl\-\_\-identify\-\_\-isactive} (void)
\begin{DoxyCompactList}\small\item\em Used by main program to see if a device is in \char`\"{}\-Identification mode\char`\"{}. \end{DoxyCompactList}\item 
int \hyperlink{group__zcl__identify_ga40470468c9c1fe4ebfb52612234710b0}{\-\_\-zcl\-\_\-identify\-\_\-time\-\_\-set} (const \hyperlink{structzcl__attribute__full__t}{zcl\-\_\-attribute\-\_\-full\-\_\-t} \hyperlink{group__hal_gaef060b3456fdcc093a7210a762d5f2ed}{F\-A\-R} $\ast$attribute, \hyperlink{structzcl__attribute__write__rec__t}{zcl\-\_\-attribute\-\_\-write\-\_\-rec\-\_\-t} $\ast$rec)
\begin{DoxyCompactList}\small\item\em Function registered to \hyperlink{group__zcl__identify_ga7df877a02f273adc190aa24ad0aff4c9}{Z\-C\-L\-\_\-\-I\-D\-E\-N\-T\-I\-F\-Y\-\_\-\-A\-T\-T\-R\-\_\-\-I\-D\-E\-N\-T\-I\-F\-Y\-\_\-\-T\-I\-M\-E} attribute of Identify Cluster. \end{DoxyCompactList}\item 
uint\-\_\-fast8\-\_\-t \hyperlink{group__zcl__identify_ga7cde47425d0a779f5aff87985ea01951}{\-\_\-zcl\-\_\-identify\-\_\-time\-\_\-get} (const \hyperlink{structzcl__attribute__full__t}{zcl\-\_\-attribute\-\_\-full\-\_\-t} \hyperlink{group__hal_gaef060b3456fdcc093a7210a762d5f2ed}{F\-A\-R} $\ast$attribute)
\begin{DoxyCompactList}\small\item\em Function registered to \hyperlink{group__zcl__identify_ga7df877a02f273adc190aa24ad0aff4c9}{Z\-C\-L\-\_\-\-I\-D\-E\-N\-T\-I\-F\-Y\-\_\-\-A\-T\-T\-R\-\_\-\-I\-D\-E\-N\-T\-I\-F\-Y\-\_\-\-T\-I\-M\-E} attribute of Identify Cluster and called to refresh the Identify\-Time attribute. \end{DoxyCompactList}\item 
int \hyperlink{group__zcl__identify_ga94a1fe7c8892b55e0ffd3e2795139b1d}{zcl\-\_\-identify\-\_\-command} (const \hyperlink{structwpan__envelope__t}{wpan\-\_\-envelope\-\_\-t} \hyperlink{group__hal_gaef060b3456fdcc093a7210a762d5f2ed}{F\-A\-R} $\ast$envelope, void \hyperlink{group__hal_gaef060b3456fdcc093a7210a762d5f2ed}{F\-A\-R} $\ast$context)
\begin{DoxyCompactList}\small\item\em Handler for Z\-C\-L Identify Server Commands (Identify, Identify\-Query). \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\hypertarget{group__zcl__identify_ga2cb1b23d3ccb08ae200e797358694d51}{\hyperlink{group__hal_ga5a8b2dc9e45a9ee81a94ef304fb62505}{uint16\-\_\-t} \hyperlink{group__zcl__identify_ga2cb1b23d3ccb08ae200e797358694d51}{zcl\-\_\-identify\-\_\-time} = 0}\label{group__zcl__identify_ga2cb1b23d3ccb08ae200e797358694d51}

\begin{DoxyCompactList}\small\item\em Private variable for tracking amount of \char`\"{}\-Identification mode\char`\"{} time left. \end{DoxyCompactList}\item 
\hyperlink{group__hal__dos_ga09a1e304d66d35dd47daffee9731edaa}{uint32\-\_\-t} \hyperlink{group__zcl__identify_ga467ad1e40ea8475b4e49865436883e94}{zcl\-\_\-identify\-\_\-end} = 0
\begin{DoxyCompactList}\small\item\em Private variable for tracking value of xbee\-\_\-seconds\-\_\-timer() that \char`\"{}\-Idenfication mode\char`\"{} should end. \end{DoxyCompactList}\item 
\begin{tabbing}
xx\=xx\=xx\=xx\=xx\=xx\=xx\=xx\=xx\=\kill
struct \{\\
\>\hyperlink{structzcl__attribute__full__t}{zcl\_attribute\_full\_t} {\bfseries identify\_time}\\
\>\hyperlink{group__hal_ga5a8b2dc9e45a9ee81a94ef304fb62505}{uint16\_t} {\bfseries end\_of\_list}\\
\} {\bfseries zcl\_identify\_attr}\\

\end{tabbing}\item 
const \hyperlink{structzcl__attribute__tree__t}{zcl\-\_\-attribute\-\_\-tree\-\_\-t} {\bfseries zcl\-\_\-identify\-\_\-attribute\-\_\-tree} \mbox{[}$\,$\mbox{]}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Server code to implement the Zig\-Bee Identify Cluster (Z\-C\-L Spec section 3.\-5). Main program should call \hyperlink{group__zcl__identify_ga95b00d55b861c1ea6033c16794ae818d}{zcl\-\_\-identify\-\_\-isactive()} in its main loop and perform some sort of action (flash an L\-E\-D or L\-C\-D backlight) to help an installer identify the device during network commissioning.

Use the macro \hyperlink{group__zcl__identify_gaeae5b3a460629b095247d160235ec586}{Z\-C\-L\-\_\-\-C\-L\-U\-S\-T\-\_\-\-E\-N\-T\-R\-Y\-\_\-\-I\-D\-E\-N\-T\-I\-F\-Y\-\_\-\-S\-E\-R\-V\-E\-R} to add an Identify Cluster Server to the cluster list of an endpoint.

Call \hyperlink{group__zcl__identify_ga95b00d55b861c1ea6033c16794ae818d}{zcl\-\_\-identify\-\_\-isactive()} in the main loop of your program to see how many seconds are left in \char`\"{}\-Identification mode\char`\"{}.

\begin{DoxyNote}{Note}
Maybe generalize the attribute read/write functions to use attribute-\/$>$value (passed in) instead of referencing zcl\-\_\-identify\-\_\-time directly? Maybe not, makes it harder for other parts of the system to call \hyperlink{group__zcl__identify_ga40470468c9c1fe4ebfb52612234710b0}{\-\_\-zcl\-\_\-identify\-\_\-time\-\_\-set()} and \hyperlink{group__zcl__identify_ga7cde47425d0a779f5aff87985ea01951}{\-\_\-zcl\-\_\-identify\-\_\-time\-\_\-get()}. 
\end{DoxyNote}
