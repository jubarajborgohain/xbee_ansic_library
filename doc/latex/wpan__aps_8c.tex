\hypertarget{wpan__aps_8c}{\section{src/wpan/wpan\-\_\-aps.c File Reference}
\label{wpan__aps_8c}\index{src/wpan/wpan\-\_\-aps.\-c@{src/wpan/wpan\-\_\-aps.\-c}}
}


Base W\-P\-A\-N/\-Zig\-Bee layer, responsible for endpoints and clusters.  


{\ttfamily \#include $<$errno.\-h$>$}\\*
{\ttfamily \#include $<$stddef.\-h$>$}\\*
{\ttfamily \#include $<$stdio.\-h$>$}\\*
{\ttfamily \#include \char`\"{}xbee/platform.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}wpan/types.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}wpan/aps.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}zigbee/zdo.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}zigbee/zcl.\-h\char`\"{}}\\*
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
wpan\-\_\-aps\-\_\-debug const \\*
\hyperlink{structwpan__cluster__table__entry__t}{wpan\-\_\-cluster\-\_\-table\-\_\-entry\-\_\-t} $\ast$ \hyperlink{group__wpan__aps_ga1c725384b21faf5953683d7b028c7be3}{wpan\-\_\-cluster\-\_\-match} (\hyperlink{group__hal_ga5a8b2dc9e45a9ee81a94ef304fb62505}{uint16\-\_\-t} match, \hyperlink{group__hal_gae1affc9ca37cfb624959c866a73f83c2}{uint8\-\_\-t} mask, const \hyperlink{structwpan__cluster__table__entry__t}{wpan\-\_\-cluster\-\_\-table\-\_\-entry\-\_\-t} $\ast$entry)
\begin{DoxyCompactList}\small\item\em Search a cluster table for a matching cluster I\-D. \end{DoxyCompactList}\item 
wpan\-\_\-aps\-\_\-debug const \\*
\hyperlink{structwpan__endpoint__table__entry__t}{wpan\-\_\-endpoint\-\_\-table\-\_\-entry\-\_\-t} $\ast$ \hyperlink{group__wpan__aps_gaca3b72047ea4e156ce9a977c13624b5c}{wpan\-\_\-endpoint\-\_\-get\-\_\-next} (\hyperlink{structwpan__dev__t}{wpan\-\_\-dev\-\_\-t} $\ast$dev, const \hyperlink{structwpan__endpoint__table__entry__t}{wpan\-\_\-endpoint\-\_\-table\-\_\-entry\-\_\-t} $\ast$ep)
\begin{DoxyCompactList}\small\item\em Function used to walk a device's endpoint table. \end{DoxyCompactList}\item 
wpan\-\_\-aps\-\_\-debug const \\*
\hyperlink{structwpan__endpoint__table__entry__t}{wpan\-\_\-endpoint\-\_\-table\-\_\-entry\-\_\-t} $\ast$ \hyperlink{group__wpan__aps_ga0a88c1b17d1f9a42a53668b14f15e205}{wpan\-\_\-endpoint\-\_\-match} (\hyperlink{structwpan__dev__t}{wpan\-\_\-dev\-\_\-t} $\ast$dev, \hyperlink{group__hal_gae1affc9ca37cfb624959c866a73f83c2}{uint8\-\_\-t} \hyperlink{group__zdo_ga7d397493728da2bca8d55b2d61c4ec5d}{endpoint}, \hyperlink{group__hal_ga5a8b2dc9e45a9ee81a94ef304fb62505}{uint16\-\_\-t} profile\-\_\-id)
\begin{DoxyCompactList}\small\item\em Walk a device's endpoint table looking for a matching endpoint I\-D and profile I\-D. \end{DoxyCompactList}\item 
wpan\-\_\-aps\-\_\-debug const \\*
\hyperlink{structwpan__endpoint__table__entry__t}{wpan\-\_\-endpoint\-\_\-table\-\_\-entry\-\_\-t} $\ast$ \hyperlink{group__wpan__aps_gab448ec18a47178272336da5eacfa2290}{wpan\-\_\-endpoint\-\_\-of\-\_\-envelope} (const \hyperlink{structwpan__envelope__t}{wpan\-\_\-envelope\-\_\-t} $\ast$env)
\begin{DoxyCompactList}\small\item\em Look up the endpoint table entry for the source endpoint of an envelope. \end{DoxyCompactList}\item 
wpan\-\_\-aps\-\_\-debug const \\*
\hyperlink{structwpan__endpoint__table__entry__t}{wpan\-\_\-endpoint\-\_\-table\-\_\-entry\-\_\-t} $\ast$ \hyperlink{group__wpan__aps_ga2cc975231963e0eb75c449c11b1d95de}{wpan\-\_\-endpoint\-\_\-of\-\_\-cluster} (\hyperlink{structwpan__dev__t}{wpan\-\_\-dev\-\_\-t} $\ast$dev, \hyperlink{group__hal_ga5a8b2dc9e45a9ee81a94ef304fb62505}{uint16\-\_\-t} profile\-\_\-id, \hyperlink{group__hal_ga5a8b2dc9e45a9ee81a94ef304fb62505}{uint16\-\_\-t} cluster\-\_\-id, \hyperlink{group__hal_gae1affc9ca37cfb624959c866a73f83c2}{uint8\-\_\-t} mask)
\begin{DoxyCompactList}\small\item\em Walk a device's endpoint table looking for a matching profile I\-D and cluster I\-D. \end{DoxyCompactList}\item 
wpan\-\_\-aps\-\_\-debug int \hyperlink{group__wpan__aps_gae5f88ed40bd334d963e261947b77b980}{wpan\-\_\-conversation\-\_\-register} (\hyperlink{structwpan__ep__state__t}{wpan\-\_\-ep\-\_\-state\-\_\-t} \hyperlink{group__hal_gaef060b3456fdcc093a7210a762d5f2ed}{F\-A\-R} $\ast$state, \hyperlink{group__wpan__aps_gaffe7bb679e9ba6de49f68fdc584fbefb}{wpan\-\_\-response\-\_\-fn} handler, const void \hyperlink{group__hal_gaef060b3456fdcc093a7210a762d5f2ed}{F\-A\-R} $\ast$context, \hyperlink{group__hal_ga5a8b2dc9e45a9ee81a94ef304fb62505}{uint16\-\_\-t} timeout)
\begin{DoxyCompactList}\small\item\em Add a conversation to the table of tracked conversations. \end{DoxyCompactList}\item 
wpan\-\_\-aps\-\_\-debug void \hyperlink{group__wpan__aps_gad36c04a3f2741f52710ab7768d1fcda8}{wpan\-\_\-conversation\-\_\-delete} (\hyperlink{structwpan__conversation__t}{wpan\-\_\-conversation\-\_\-t} \hyperlink{group__hal_gaef060b3456fdcc093a7210a762d5f2ed}{F\-A\-R} $\ast$conversation)
\begin{DoxyCompactList}\small\item\em Delete a conversation from an endpoint's conversation table. \end{DoxyCompactList}\item 
void \hyperlink{group__wpan__aps_gad55133545fcf6ebc2d630057abf5ad48}{\-\_\-wpan\-\_\-endpoint\-\_\-expire\-\_\-conversations} (\hyperlink{structwpan__ep__state__t}{wpan\-\_\-ep\-\_\-state\-\_\-t} \hyperlink{group__hal_gaef060b3456fdcc093a7210a762d5f2ed}{F\-A\-R} $\ast$state)
\begin{DoxyCompactList}\small\item\em Walk an endpoint's conversation table and expire any conversations that have timed out. \end{DoxyCompactList}\item 
wpan\-\_\-aps\-\_\-debug int \hyperlink{group__wpan__aps_gaf56e4d0e52462b5cf41c5fa5f23ea952}{wpan\-\_\-conversation\-\_\-response} (\hyperlink{structwpan__ep__state__t}{wpan\-\_\-ep\-\_\-state\-\_\-t} \hyperlink{group__hal_gaef060b3456fdcc093a7210a762d5f2ed}{F\-A\-R} $\ast$state, \hyperlink{group__hal_gae1affc9ca37cfb624959c866a73f83c2}{uint8\-\_\-t} transaction\-\_\-id, const \hyperlink{structwpan__envelope__t}{wpan\-\_\-envelope\-\_\-t} \hyperlink{group__hal_gaef060b3456fdcc093a7210a762d5f2ed}{F\-A\-R} $\ast$envelope)
\begin{DoxyCompactList}\small\item\em Searches the endpoint's table of active conversations (outstanding requests waiting for responses) for a given transaction. \end{DoxyCompactList}\item 
wpan\-\_\-aps\-\_\-debug \hyperlink{group__hal_gae1affc9ca37cfb624959c866a73f83c2}{uint8\-\_\-t} \hyperlink{group__wpan__aps_gaab1c77ccbd237270f11499fb6411599c}{wpan\-\_\-endpoint\-\_\-next\-\_\-trans} (const \hyperlink{structwpan__endpoint__table__entry__t}{wpan\-\_\-endpoint\-\_\-table\-\_\-entry\-\_\-t} $\ast$ep)
\begin{DoxyCompactList}\small\item\em Increment and return the endpoint's transaction I\-D counter. \end{DoxyCompactList}\item 
wpan\-\_\-aps\-\_\-debug int \hyperlink{group__wpan__aps_gaea487a9cccf8d5a2c592324678f13b4b}{\-\_\-wpan\-\_\-endpoint\-\_\-dispatch} (\hyperlink{structwpan__envelope__t}{wpan\-\_\-envelope\-\_\-t} $\ast$envelope, const \hyperlink{structwpan__endpoint__table__entry__t}{wpan\-\_\-endpoint\-\_\-table\-\_\-entry\-\_\-t} $\ast$ep)
\begin{DoxyCompactList}\small\item\em Dispatch a message for a given endpoint. \end{DoxyCompactList}\item 
wpan\-\_\-aps\-\_\-debug int \hyperlink{group__wpan__aps_gae84eafd10f51de6cdac4732b8948606d}{wpan\-\_\-envelope\-\_\-dispatch} (\hyperlink{structwpan__envelope__t}{wpan\-\_\-envelope\-\_\-t} $\ast$envelope)
\begin{DoxyCompactList}\small\item\em Find the matching endpoint for the provided {\ttfamily envelope} and have it process the frame. \end{DoxyCompactList}\item 
wpan\-\_\-aps\-\_\-debug void \hyperlink{group__wpan__aps_ga95e2bb4e4c546191c059f54179064fc3}{wpan\-\_\-envelope\-\_\-create} (\hyperlink{structwpan__envelope__t}{wpan\-\_\-envelope\-\_\-t} $\ast$envelope, \hyperlink{structwpan__dev__t}{wpan\-\_\-dev\-\_\-t} $\ast$dev, const \hyperlink{unionaddr64}{addr64} \hyperlink{group__hal_gaef060b3456fdcc093a7210a762d5f2ed}{F\-A\-R} $\ast$ieee, \hyperlink{group__hal_ga5a8b2dc9e45a9ee81a94ef304fb62505}{uint16\-\_\-t} network\-\_\-addr)
\begin{DoxyCompactList}\small\item\em Starting with a blank envelope, fill in the device, 64-\/bit I\-E\-E\-E address and 16-\/bit network address of the destination. \end{DoxyCompactList}\item 
wpan\-\_\-aps\-\_\-debug int \hyperlink{group__wpan__aps_gaaaee02ff456d4f6103a5e94c2ba106c5}{wpan\-\_\-envelope\-\_\-reply} (\hyperlink{structwpan__envelope__t}{wpan\-\_\-envelope\-\_\-t} \hyperlink{group__hal_gaef060b3456fdcc093a7210a762d5f2ed}{F\-A\-R} $\ast$reply, const \hyperlink{structwpan__envelope__t}{wpan\-\_\-envelope\-\_\-t} \hyperlink{group__hal_gaef060b3456fdcc093a7210a762d5f2ed}{F\-A\-R} $\ast$original)
\begin{DoxyCompactList}\small\item\em Create a reply envelope based on the envelope received from a remote node. \end{DoxyCompactList}\item 
wpan\-\_\-aps\-\_\-debug int \hyperlink{group__wpan__aps_ga06f1e9e86b74ef807ded44b79b13e283}{wpan\-\_\-envelope\-\_\-send} (const \hyperlink{structwpan__envelope__t}{wpan\-\_\-envelope\-\_\-t} \hyperlink{group__hal_gaef060b3456fdcc093a7210a762d5f2ed}{F\-A\-R} $\ast$envelope)
\begin{DoxyCompactList}\small\item\em Send a message to an endpoint using address and payload information stored in a \hyperlink{structwpan__envelope__t}{wpan\-\_\-envelope\-\_\-t} structure. \end{DoxyCompactList}\item 
wpan\-\_\-aps\-\_\-debug void \hyperlink{group__wpan__aps_ga2a4e8b3e2022e55e6607243a5feb25cd}{wpan\-\_\-envelope\-\_\-dump} (const \hyperlink{structwpan__envelope__t}{wpan\-\_\-envelope\-\_\-t} \hyperlink{group__hal_gaef060b3456fdcc093a7210a762d5f2ed}{F\-A\-R} $\ast$envelope)
\begin{DoxyCompactList}\small\item\em Debugging function to dump the contents of an envelope to stdout. \end{DoxyCompactList}\item 
wpan\-\_\-aps\-\_\-debug int \hyperlink{group__wpan__aps_ga1254464011d2d98c13db7b0b3d41c25b}{wpan\-\_\-tick} (\hyperlink{structwpan__dev__t}{wpan\-\_\-dev\-\_\-t} $\ast$dev)
\begin{DoxyCompactList}\small\item\em Calls the underlying hardware tick function to process received frames, and times out expired conversations. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Base W\-P\-A\-N/\-Zig\-Bee layer, responsible for endpoints and clusters. 