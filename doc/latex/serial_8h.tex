\hypertarget{serial_8h}{\section{include/xbee/serial.h File Reference}
\label{serial_8h}\index{include/xbee/serial.\-h@{include/xbee/serial.\-h}}
}


Platform-\/specific layer provieds a consistent serial A\-P\-I to upper layers of the driver.  


{\ttfamily \#include \char`\"{}xbee/platform.\-h\char`\"{}}\\*
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{group__hal_ga336bff4f4a6012aacc4468132bbd3d7f}{X\-B\-E\-E\-\_\-\-B\-E\-G\-I\-N\-\_\-\-D\-E\-C\-L\-S} \hyperlink{group__hal_ga04dd5074964518403bf944f2b240a5f8}{bool\-\_\-t} \hyperlink{group__xbee__serial_gae7f838b59f553507bf81a86042fe9cd7}{xbee\-\_\-ser\-\_\-invalid} (\hyperlink{structxbee__serial__t}{xbee\-\_\-serial\-\_\-t} $\ast$serial)
\begin{DoxyCompactList}\small\item\em Helper function used by other xbee\-\_\-serial functions to validate the {\itshape serial} parameter. \end{DoxyCompactList}\item 
const char $\ast$ \hyperlink{group__xbee__serial_ga898057d1b7645785e7f3d6256828d039}{xbee\-\_\-ser\-\_\-portname} (\hyperlink{structxbee__serial__t}{xbee\-\_\-serial\-\_\-t} $\ast$serial)
\begin{DoxyCompactList}\small\item\em Returns a human-\/readable string describing the serial port. \end{DoxyCompactList}\item 
int \hyperlink{group__xbee__serial_ga2ca4e60c9d642084afa52dff9e1f6be4}{xbee\-\_\-ser\-\_\-write} (\hyperlink{structxbee__serial__t}{xbee\-\_\-serial\-\_\-t} $\ast$serial, const void \hyperlink{group__hal_gaef060b3456fdcc093a7210a762d5f2ed}{F\-A\-R} $\ast$buffer, int \hyperlink{group__zdo_gab2b3adeb2a67e656ff030b56727fd0ac}{length})
\begin{DoxyCompactList}\small\item\em Transmits {\itshape length} bytes from {\itshape buffer} to the X\-Bee serial port {\itshape serial}. \end{DoxyCompactList}\item 
int \hyperlink{group__xbee__serial_ga8263312373c03a79a718142e051b3342}{xbee\-\_\-ser\-\_\-read} (\hyperlink{structxbee__serial__t}{xbee\-\_\-serial\-\_\-t} $\ast$serial, void \hyperlink{group__hal_gaef060b3456fdcc093a7210a762d5f2ed}{F\-A\-R} $\ast$buffer, int bufsize)
\begin{DoxyCompactList}\small\item\em Reads up to {\itshape bufsize} bytes from X\-Bee serial port {\itshape serial} and into {\itshape buffer}. \end{DoxyCompactList}\item 
int \hyperlink{group__xbee__serial_ga86fea2345efb8bf9424228f0979b1849}{xbee\-\_\-ser\-\_\-putchar} (\hyperlink{structxbee__serial__t}{xbee\-\_\-serial\-\_\-t} $\ast$serial, \hyperlink{group__hal_gae1affc9ca37cfb624959c866a73f83c2}{uint8\-\_\-t} ch)
\begin{DoxyCompactList}\small\item\em Transmits a single character, {\itshape ch}, to the X\-Bee serial port {\itshape serial}. \end{DoxyCompactList}\item 
int \hyperlink{group__xbee__serial_gaeeb38154313a44f86146cdcfe08e7d08}{xbee\-\_\-ser\-\_\-getchar} (\hyperlink{structxbee__serial__t}{xbee\-\_\-serial\-\_\-t} $\ast$serial)
\begin{DoxyCompactList}\small\item\em Reads a single character from the X\-Bee serial port {\itshape serial}. \end{DoxyCompactList}\item 
int \hyperlink{group__xbee__serial_ga3ad8f378b572d6fec982f1086bd3b94f}{xbee\-\_\-ser\-\_\-tx\-\_\-free} (\hyperlink{structxbee__serial__t}{xbee\-\_\-serial\-\_\-t} $\ast$serial)
\begin{DoxyCompactList}\small\item\em Returns the number of bytes of unused space in the serial transmit buffer for X\-Bee serial port {\itshape serial}. \end{DoxyCompactList}\item 
int \hyperlink{group__xbee__serial_gaabf70934d186354cde4ac14ed27d1bd2}{xbee\-\_\-ser\-\_\-tx\-\_\-used} (\hyperlink{structxbee__serial__t}{xbee\-\_\-serial\-\_\-t} $\ast$serial)
\begin{DoxyCompactList}\small\item\em Returns the number of queued bytes in the serial transmit buffer for X\-Bee serial port {\itshape serial}. \end{DoxyCompactList}\item 
int \hyperlink{group__xbee__serial_ga05308d37301d27715f1e1308b7189220}{xbee\-\_\-ser\-\_\-tx\-\_\-flush} (\hyperlink{structxbee__serial__t}{xbee\-\_\-serial\-\_\-t} $\ast$serial)
\begin{DoxyCompactList}\small\item\em Flushes (i.\-e., deletes and does not transmit) characters in the serial transmit buffer for X\-Bee serial port {\itshape serial}. \end{DoxyCompactList}\item 
int \hyperlink{group__xbee__serial_ga16fb431a1e66861439518e562431821f}{xbee\-\_\-ser\-\_\-rx\-\_\-free} (\hyperlink{structxbee__serial__t}{xbee\-\_\-serial\-\_\-t} $\ast$serial)
\begin{DoxyCompactList}\small\item\em Returns the number of bytes of unused space in the serial receive buffer for X\-Bee serial port {\itshape serial}. \end{DoxyCompactList}\item 
int \hyperlink{group__xbee__serial_ga43b8322771cc16b4130fa5330ad2242b}{xbee\-\_\-ser\-\_\-rx\-\_\-used} (\hyperlink{structxbee__serial__t}{xbee\-\_\-serial\-\_\-t} $\ast$serial)
\begin{DoxyCompactList}\small\item\em Returns the number of queued bytes in the serial receive buffer for X\-Bee serial port {\itshape serial}. \end{DoxyCompactList}\item 
int \hyperlink{group__xbee__serial_ga98a6d5ceb5e1445e8ef82ccaa65a8c15}{xbee\-\_\-ser\-\_\-rx\-\_\-flush} (\hyperlink{structxbee__serial__t}{xbee\-\_\-serial\-\_\-t} $\ast$serial)
\begin{DoxyCompactList}\small\item\em Deletes all characters in the serial receive buffer for X\-Bee serial port {\itshape serial}. \end{DoxyCompactList}\item 
int \hyperlink{group__xbee__serial_gaa615a221dd69c17ee2989c281f2bf04a}{xbee\-\_\-ser\-\_\-open} (\hyperlink{structxbee__serial__t}{xbee\-\_\-serial\-\_\-t} $\ast$serial, \hyperlink{group__hal__dos_ga09a1e304d66d35dd47daffee9731edaa}{uint32\-\_\-t} baudrate)
\begin{DoxyCompactList}\small\item\em Opens the serial port connected to X\-Bee serial port {\itshape serial} at {\itshape baudrate} bits/second. \end{DoxyCompactList}\item 
int \hyperlink{group__xbee__serial_gab3c12543a07e0669b672c5cab54b0926}{xbee\-\_\-ser\-\_\-baudrate} (\hyperlink{structxbee__serial__t}{xbee\-\_\-serial\-\_\-t} $\ast$serial, \hyperlink{group__hal__dos_ga09a1e304d66d35dd47daffee9731edaa}{uint32\-\_\-t} baudrate)
\begin{DoxyCompactList}\small\item\em Change the baud rate of X\-Bee serial port {\itshape serial} to {\itshape baudrate} bits/second. \end{DoxyCompactList}\item 
int \hyperlink{group__xbee__serial_ga48b9d743a446074ea6abacd0de24044d}{xbee\-\_\-ser\-\_\-close} (\hyperlink{structxbee__serial__t}{xbee\-\_\-serial\-\_\-t} $\ast$serial)
\begin{DoxyCompactList}\small\item\em Close the serial port attached to X\-Bee serial port {\itshape serial}. \end{DoxyCompactList}\item 
int \hyperlink{group__xbee__serial_gae19aa61eec588d1b935d267b0a982319}{xbee\-\_\-ser\-\_\-break} (\hyperlink{structxbee__serial__t}{xbee\-\_\-serial\-\_\-t} $\ast$serial, \hyperlink{group__hal_ga04dd5074964518403bf944f2b240a5f8}{bool\-\_\-t} enabled)
\begin{DoxyCompactList}\small\item\em Disable the serial transmit pin and pull it low to send a break to the X\-Bee serial port. \end{DoxyCompactList}\item 
int \hyperlink{group__xbee__serial_ga33229d0d63ff1442f23b0739794d3afb}{xbee\-\_\-ser\-\_\-flowcontrol} (\hyperlink{structxbee__serial__t}{xbee\-\_\-serial\-\_\-t} $\ast$serial, \hyperlink{group__hal_ga04dd5074964518403bf944f2b240a5f8}{bool\-\_\-t} enabled)
\begin{DoxyCompactList}\small\item\em Enable or disable hardware flow control (C\-T\-S/\-R\-T\-S) on the serial port for X\-Bee serial port {\itshape serial}. \end{DoxyCompactList}\item 
int \hyperlink{group__xbee__serial_gad1b1f9f42e58d8299ddcca1c9cb3c5e8}{xbee\-\_\-ser\-\_\-set\-\_\-rts} (\hyperlink{structxbee__serial__t}{xbee\-\_\-serial\-\_\-t} $\ast$serial, \hyperlink{group__hal_ga04dd5074964518403bf944f2b240a5f8}{bool\-\_\-t} asserted)
\begin{DoxyCompactList}\small\item\em Disable hardware flow control and manually set the R\-T\-S (ready to send) pin on the X\-Bee device's serial port. \end{DoxyCompactList}\item 
int \hyperlink{group__xbee__serial_ga894f6fadc890b5ba5ce32338f0acd217}{xbee\-\_\-ser\-\_\-get\-\_\-cts} (\hyperlink{structxbee__serial__t}{xbee\-\_\-serial\-\_\-t} $\ast$serial)
\begin{DoxyCompactList}\small\item\em Read the status of the /\-C\-T\-S (clear to send) pin on the serial port connected to X\-Bee serial port {\itshape serial}. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Platform-\/specific layer provieds a consistent serial A\-P\-I to upper layers of the driver. \hypertarget{serial_8h_xbee_serial_overview}{}\subsection{X\-Bee Serial A\-P\-I Overview}\label{serial_8h_xbee_serial_overview}
This platform-\/specific layer maps a consistent serial A\-P\-I for the upper levels of the driver to the device's native serial A\-P\-I (e.\-g., ser\-Xread/ser\-Xwrite on the Rabbit, opening a C\-O\-M port on a Windows P\-C).


\begin{DoxyItemize}
\item sending and receiving serial data
\begin{DoxyItemize}
\item \hyperlink{group__hal__dos_ga2ca4e60c9d642084afa52dff9e1f6be4}{xbee\-\_\-ser\-\_\-write()}
\item \hyperlink{group__hal__dos_ga8263312373c03a79a718142e051b3342}{xbee\-\_\-ser\-\_\-read()}
\item \hyperlink{group__hal__dos_ga86fea2345efb8bf9424228f0979b1849}{xbee\-\_\-ser\-\_\-putchar()}
\item \hyperlink{group__hal__dos_gaeeb38154313a44f86146cdcfe08e7d08}{xbee\-\_\-ser\-\_\-getchar()}
\end{DoxyItemize}
\end{DoxyItemize}


\begin{DoxyItemize}
\item checking the status of transmit and receive buffers
\begin{DoxyItemize}
\item \hyperlink{group__hal__dos_ga3ad8f378b572d6fec982f1086bd3b94f}{xbee\-\_\-ser\-\_\-tx\-\_\-free()}
\item \hyperlink{group__hal__dos_gaabf70934d186354cde4ac14ed27d1bd2}{xbee\-\_\-ser\-\_\-tx\-\_\-used()}
\item \hyperlink{group__hal__dos_ga05308d37301d27715f1e1308b7189220}{xbee\-\_\-ser\-\_\-tx\-\_\-flush()}
\item \hyperlink{group__hal__dos_ga16fb431a1e66861439518e562431821f}{xbee\-\_\-ser\-\_\-rx\-\_\-free()}
\item \hyperlink{group__hal__dos_ga43b8322771cc16b4130fa5330ad2242b}{xbee\-\_\-ser\-\_\-rx\-\_\-used()}
\item \hyperlink{group__hal__dos_ga98a6d5ceb5e1445e8ef82ccaa65a8c15}{xbee\-\_\-ser\-\_\-rx\-\_\-flush()}
\end{DoxyItemize}
\end{DoxyItemize}


\begin{DoxyItemize}
\item managing the serial port and control lines
\begin{DoxyItemize}
\item \hyperlink{group__hal__dos_gaa615a221dd69c17ee2989c281f2bf04a}{xbee\-\_\-ser\-\_\-open()}
\item xbee\-\_\-ser\-\_\-baudrate()
\item \hyperlink{group__hal__dos_ga48b9d743a446074ea6abacd0de24044d}{xbee\-\_\-ser\-\_\-close()}
\item \hyperlink{group__hal__dos_ga6ae89792415a7ac8b45b56188eb9eeb4}{xbee\-\_\-ser\-\_\-break()}
\item \hyperlink{group__hal__dos_ga1f5f72ffdfbfb45ac523640db32296ff}{xbee\-\_\-ser\-\_\-flowcontrol()}
\item \hyperlink{group__hal__dos_ga731188d8cf41d3d749bc84d51b672535}{xbee\-\_\-ser\-\_\-set\-\_\-rts()}
\item \hyperlink{group__hal__dos_ga894f6fadc890b5ba5ce32338f0acd217}{xbee\-\_\-ser\-\_\-get\-\_\-cts()}
\end{DoxyItemize}
\end{DoxyItemize}

User code will not typically call these functions, unless they are not making use of the higher layers of the driver.

Note that we may need some additional functions to support firmware updates. The firmware update code typically needs to be able to open the serial port at different baud rates, send a break on the Tx pin and control the reset pin. 