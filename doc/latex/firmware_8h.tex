\hypertarget{firmware_8h}{\section{include/xbee/firmware.h File Reference}
\label{firmware_8h}\index{include/xbee/firmware.\-h@{include/xbee/firmware.\-h}}
}


Driver layer for performing X\-Bee firmware updates.  


{\ttfamily \#include \char`\"{}xbee/xmodem.\-h\char`\"{}}\\*
\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structxbee__fw__oem__state__t}{xbee\-\_\-fw\-\_\-oem\-\_\-state\-\_\-t}
\item 
struct \hyperlink{structxbee__fw__source__t}{xbee\-\_\-fw\-\_\-source\-\_\-t}
\item 
struct \hyperlink{structxbee__fw__buffer__t}{xbee\-\_\-fw\-\_\-buffer\-\_\-t}
\end{DoxyCompactItemize}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\hypertarget{group__xbee__firmware_gab8438d198ddcd31a879433fe582a7b7c}{\#define {\bfseries X\-B\-E\-E\-\_\-\-F\-W\-\_\-\-L\-O\-A\-D\-\_\-\-T\-I\-M\-E\-O\-U\-T}~5000}\label{group__xbee__firmware_gab8438d198ddcd31a879433fe582a7b7c}

\item 
\hypertarget{group__xbee__firmware_gae475cea6680670df9180ef1ce2603fb6}{\#define \hyperlink{group__xbee__firmware_gae475cea6680670df9180ef1ce2603fb6}{xbee\-\_\-fw\-\_\-install\-\_\-hcs08\-\_\-state}(source)~\hyperlink{group__xbee__firmware_ga8590708a38ac57ace8c816cc7cfd0859}{xbee\-\_\-fw\-\_\-install\-\_\-ebl\-\_\-state}( source)}\label{group__xbee__firmware_gae475cea6680670df9180ef1ce2603fb6}

\begin{DoxyCompactList}\small\item\em See documentation for \hyperlink{group__xbee__firmware_ga8590708a38ac57ace8c816cc7cfd0859}{xbee\-\_\-fw\-\_\-install\-\_\-ebl\-\_\-state()}. \end{DoxyCompactList}\item 
\hypertarget{group__xbee__firmware_ga8fb52237a7a070f5e2c56ef410c5f0f3}{\#define \hyperlink{group__xbee__firmware_ga8fb52237a7a070f5e2c56ef410c5f0f3}{xbee\-\_\-fw\-\_\-status\-\_\-hcs08}(source, buff)~\hyperlink{group__xbee__firmware_ga8bee6e4bb7564c51bb38129e97a12e99}{xbee\-\_\-fw\-\_\-status\-\_\-ebl}( source, buff)}\label{group__xbee__firmware_ga8fb52237a7a070f5e2c56ef410c5f0f3}

\begin{DoxyCompactList}\small\item\em See documentation for \hyperlink{group__xbee__firmware_ga8bee6e4bb7564c51bb38129e97a12e99}{xbee\-\_\-fw\-\_\-status\-\_\-ebl()}. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\-\_\-xbee\-\_\-firmware\-\_\-debug int \hyperlink{group__xbee__firmware_ga3ea95570f7d7366e42b0ee6ba21a1c41}{xbee\-\_\-fw\-\_\-install\-\_\-init} (\hyperlink{structxbee__dev__t}{xbee\-\_\-dev\-\_\-t} $\ast$xbee, const \hyperlink{structwpan__address__t}{wpan\-\_\-address\-\_\-t} \hyperlink{group__hal_gaef060b3456fdcc093a7210a762d5f2ed}{F\-A\-R} $\ast$target, \hyperlink{structxbee__fw__source__t}{xbee\-\_\-fw\-\_\-source\-\_\-t} $\ast$source)
\begin{DoxyCompactList}\small\item\em \begin{DoxyVerb}        Prepare to install new firmware on an attached XBee module.\end{DoxyVerb}
 \end{DoxyCompactList}\item 
\-\_\-xbee\-\_\-firmware\-\_\-debug int \hyperlink{group__xbee__firmware_gaae62252a2e1331127c9df86b6ebfc4e8}{xbee\-\_\-fw\-\_\-install\-\_\-ebl\-\_\-tick} (\hyperlink{structxbee__fw__source__t}{xbee\-\_\-fw\-\_\-source\-\_\-t} $\ast$source)
\begin{DoxyCompactList}\small\item\em Drive the firmware update process for boards that use .E\-B\-L files to store their firmware. \end{DoxyCompactList}\item 
\-\_\-xbee\-\_\-firmware\-\_\-debug unsigned int \hyperlink{group__xbee__firmware_ga8590708a38ac57ace8c816cc7cfd0859}{xbee\-\_\-fw\-\_\-install\-\_\-ebl\-\_\-state} (\hyperlink{structxbee__fw__source__t}{xbee\-\_\-fw\-\_\-source\-\_\-t} $\ast$source)
\begin{DoxyCompactList}\small\item\em Returns a unique value indicating the state of the .E\-B\-L install process. \end{DoxyCompactList}\item 
\-\_\-xbee\-\_\-firmware\-\_\-debug char \hyperlink{group__hal_gaef060b3456fdcc093a7210a762d5f2ed}{F\-A\-R} $\ast$ \hyperlink{group__xbee__firmware_ga8bee6e4bb7564c51bb38129e97a12e99}{xbee\-\_\-fw\-\_\-status\-\_\-ebl} (\hyperlink{structxbee__fw__source__t}{xbee\-\_\-fw\-\_\-source\-\_\-t} $\ast$source, char \hyperlink{group__hal_gaef060b3456fdcc093a7210a762d5f2ed}{F\-A\-R} $\ast$buffer)
\begin{DoxyCompactList}\small\item\em \begin{DoxyVerb}  Update \a buffer with the current install status of \a source.\end{DoxyVerb}
 \end{DoxyCompactList}\item 
\-\_\-xbee\-\_\-firmware\-\_\-debug int \hyperlink{group__xbee__firmware_ga00113850eb74d0cb2928c9530d253381}{xbee\-\_\-fw\-\_\-install\-\_\-hcs08\-\_\-tick} (\hyperlink{structxbee__fw__source__t}{xbee\-\_\-fw\-\_\-source\-\_\-t} $\ast$source)
\begin{DoxyCompactList}\small\item\em Drive the firmware update process for the H\-C\-S08 application on Programmable X\-Bee modules. \end{DoxyCompactList}\item 
\-\_\-xbee\-\_\-firmware\-\_\-debug int \hyperlink{group__xbee__firmware_gaea52642560ef68878fbca44e81df2be8}{xbee\-\_\-fw\-\_\-install\-\_\-oem\-\_\-tick} (\hyperlink{structxbee__fw__source__t}{xbee\-\_\-fw\-\_\-source\-\_\-t} $\ast$source)
\begin{DoxyCompactList}\small\item\em Install the firmware image stored in {\itshape source}. \end{DoxyCompactList}\item 
\-\_\-xbee\-\_\-firmware\-\_\-debug char \hyperlink{group__hal_gaef060b3456fdcc093a7210a762d5f2ed}{F\-A\-R} $\ast$ \hyperlink{group__xbee__firmware_ga0198db687345929eece03335ea1c7701}{xbee\-\_\-fw\-\_\-status\-\_\-oem} (\hyperlink{structxbee__fw__source__t}{xbee\-\_\-fw\-\_\-source\-\_\-t} $\ast$source, char \hyperlink{group__hal_gaef060b3456fdcc093a7210a762d5f2ed}{F\-A\-R} $\ast$buffer)
\begin{DoxyCompactList}\small\item\em Update {\itshape buffer} with the current install status of {\itshape source}. \end{DoxyCompactList}\item 
\-\_\-xbee\-\_\-firmware\-\_\-debug int \hyperlink{group__xbee__firmware_ga8ac2a394778a985657db3c7f08b12692}{xbee\-\_\-fw\-\_\-buffer\-\_\-init} (\hyperlink{structxbee__fw__buffer__t}{xbee\-\_\-fw\-\_\-buffer\-\_\-t} $\ast$fw, \hyperlink{group__hal__dos_ga09a1e304d66d35dd47daffee9731edaa}{uint32\-\_\-t} \hyperlink{group__zdo_gab2b3adeb2a67e656ff030b56727fd0ac}{length}, const char \hyperlink{group__hal_gaef060b3456fdcc093a7210a762d5f2ed}{F\-A\-R} $\ast$address)
\begin{DoxyCompactList}\small\item\em Helper function for setting up an \hyperlink{structxbee__fw__buffer__t}{xbee\-\_\-fw\-\_\-buffer\-\_\-t} for use with a source firmware image held entirely in a buffer. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Driver layer for performing X\-Bee firmware updates. \begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000028}{Todo}]Create typedefs for \hyperlink{structxbee__fw__source__t}{xbee\-\_\-fw\-\_\-source\-\_\-t} read() and seek() handlers, write documentation including what the return values are. We will have to check existing functions to confirm the A\-P\-I, but I'm guessing $<$0 for error, $>$=0 for number of bytes read. Make sure calls to the read() function check for errors! \hyperlink{group__xbee__firmware_ga06368ad0d6cc0d4e92dbf36f8b233f90}{\-\_\-xbee\-\_\-oem\-\_\-verify()} does not! \end{DoxyRefDesc}
