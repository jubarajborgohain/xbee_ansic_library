\hypertarget{group__util__xmodem}{\section{X\-M\-O\-D\-E\-M code used by the firmware update process}
\label{group__util__xmodem}\index{X\-M\-O\-D\-E\-M code used by the firmware update process@{X\-M\-O\-D\-E\-M code used by the firmware update process}}
}
\subsection*{Files}
\begin{DoxyCompactItemize}
\item 
file \hyperlink{xmodem__crc16_8c}{xmodem\-\_\-crc16.\-c}
\begin{DoxyCompactList}\small\item\em C\-R\-C16 implementation for use by X\-Bee's Xmodem library if platform doesn't have an existing implementation. \end{DoxyCompactList}\item 
file \hyperlink{xbee__xmodem_8c}{xbee\-\_\-xmodem.\-c}
\begin{DoxyCompactList}\small\item\em Xmodem send implementation, used for X\-Bee firmware updates. \end{DoxyCompactList}\item 
file \hyperlink{xmodem_8h}{xmodem.\-h}
\begin{DoxyCompactList}\small\item\em Xmodem A\-P\-I used with firmware updates. \end{DoxyCompactList}\item 
file \hyperlink{xmodem__crc16_8h}{xmodem\-\_\-crc16.\-h}
\begin{DoxyCompactList}\small\item\em Header for \hyperlink{group__util__xmodem_ga48b65051c5461be6d016802e2eb8a138}{crc16\-\_\-calc()} function implemented in \hyperlink{xmodem__crc16_8c}{xmodem\-\_\-crc16.\-c}. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structxbee__xmodem__state__t}{xbee\-\_\-xmodem\-\_\-state\-\_\-t}
\begin{DoxyCompactList}\small\item\em Structure used to track the state of an Xmodem send. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef int($\ast$ \hyperlink{group__util__xmodem_gae8f23aee23fead01c5b812e992799ded}{xbee\-\_\-xmodem\-\_\-read\-\_\-fn} )(void \hyperlink{group__hal_gaef060b3456fdcc093a7210a762d5f2ed}{F\-A\-R} $\ast$context, void \hyperlink{group__hal_gaef060b3456fdcc093a7210a762d5f2ed}{F\-A\-R} $\ast$buffer, \hyperlink{group__hal_ga2140805d08462d474b82ddc8d1c2f3e6}{int16\-\_\-t} bytes)
\begin{DoxyCompactList}\small\item\em Function to assign to {\ttfamily file.\-read} or {\ttfamily stream.\-read} member of an \hyperlink{structxbee__xmodem__state__t}{xbee\-\_\-xmodem\-\_\-state\-\_\-t} object. \end{DoxyCompactList}\item 
typedef int($\ast$ \hyperlink{group__util__xmodem_gad858784eff97e98dff61dda16fada3b2}{xbee\-\_\-xmodem\-\_\-write\-\_\-fn} )(void \hyperlink{group__hal_gaef060b3456fdcc093a7210a762d5f2ed}{F\-A\-R} $\ast$context, const void \hyperlink{group__hal_gaef060b3456fdcc093a7210a762d5f2ed}{F\-A\-R} $\ast$buffer, \hyperlink{group__hal_ga2140805d08462d474b82ddc8d1c2f3e6}{int16\-\_\-t} bytes)
\begin{DoxyCompactList}\small\item\em Function to assign to {\ttfamily stream.\-write} member of an \hyperlink{structxbee__xmodem__state__t}{xbee\-\_\-xmodem\-\_\-state\-\_\-t} object. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum \hyperlink{group__util__xmodem_gaca3fc49d80cd9afccc34812b2985484f}{xbee\-\_\-xmodem\-\_\-state} \{ \\*
\hyperlink{group__util__xmodem_ggaca3fc49d80cd9afccc34812b2985484fa0a84e83220282fadef6bcee5b42fd02f}{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-F\-L\-U\-S\-H}, 
\hyperlink{group__util__xmodem_ggaca3fc49d80cd9afccc34812b2985484fa35f508b4cdce4d950e327aa7fe73e9df}{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-S\-T\-A\-R\-T}, 
\hyperlink{group__util__xmodem_ggaca3fc49d80cd9afccc34812b2985484fa53ac0249ccdeb684c78baee336d65187}{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-S\-E\-N\-D}, 
\hyperlink{group__util__xmodem_ggaca3fc49d80cd9afccc34812b2985484facb6bc4306d97a0b11b1ad879725df3b5}{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-R\-E\-S\-E\-N\-D}, 
\\*
\hyperlink{group__util__xmodem_ggaca3fc49d80cd9afccc34812b2985484fac9e012359b6cf5f45ea6f2f5f9d76d4d}{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-S\-E\-N\-D\-I\-N\-G}, 
\hyperlink{group__util__xmodem_ggaca3fc49d80cd9afccc34812b2985484fad7ce55b9d8ec65fa4f8410590cb67eaa}{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-W\-A\-I\-T\-\_\-\-A\-C\-K}, 
\hyperlink{group__util__xmodem_ggaca3fc49d80cd9afccc34812b2985484fac0f165be362c1a05448acb718d15299c}{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-E\-O\-F}, 
\hyperlink{group__util__xmodem_ggaca3fc49d80cd9afccc34812b2985484fae1a85fb72853aa9b4b2b1ef7734315a4}{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-F\-I\-N\-A\-L\-\_\-\-A\-C\-K}, 
\\*
\hyperlink{group__util__xmodem_ggaca3fc49d80cd9afccc34812b2985484fac17280139c0e7d88f3c6371bda3f7123}{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-S\-U\-C\-C\-E\-S\-S}, 
\hyperlink{group__util__xmodem_ggaca3fc49d80cd9afccc34812b2985484faf97088a6d2705daabd8e016542aa112e}{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-F\-A\-I\-L\-U\-R\-E}
 \}
\begin{DoxyCompactList}\small\item\em Values for {\ttfamily state} member of \hyperlink{structxbee__xmodem__state__t}{xbee\-\_\-xmodem\-\_\-state\-\_\-t}. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{group__hal_ga5a8b2dc9e45a9ee81a94ef304fb62505}{uint16\-\_\-t} \hyperlink{group__util__xmodem_ga48b65051c5461be6d016802e2eb8a138}{crc16\-\_\-calc} (const void \hyperlink{group__hal_gaef060b3456fdcc093a7210a762d5f2ed}{F\-A\-R} $\ast$\hyperlink{group__xbee__io_gac5955aa1e44ff234e6d78a19cf68f25c}{data}, \hyperlink{group__hal_ga5a8b2dc9e45a9ee81a94ef304fb62505}{uint16\-\_\-t} \hyperlink{group__zdo_gab2b3adeb2a67e656ff030b56727fd0ac}{length}, \hyperlink{group__hal_ga5a8b2dc9e45a9ee81a94ef304fb62505}{uint16\-\_\-t} current)
\begin{DoxyCompactList}\small\item\em Calculate C\-R\-C-\/16 of a data buffer using polynomial (0x1021) without reflection. \end{DoxyCompactList}\item 
\hypertarget{group__util__xmodem_gae12995a59299dd50542d7a9eb6ddfd2c}{int {\bfseries \-\_\-xbee\-\_\-xmodem\-\_\-ser\-\_\-read} (void \hyperlink{group__hal_gaef060b3456fdcc093a7210a762d5f2ed}{F\-A\-R} $\ast$context, void \hyperlink{group__hal_gaef060b3456fdcc093a7210a762d5f2ed}{F\-A\-R} $\ast$buffer, \hyperlink{group__hal_ga2140805d08462d474b82ddc8d1c2f3e6}{int16\-\_\-t} bytes)}\label{group__util__xmodem_gae12995a59299dd50542d7a9eb6ddfd2c}

\item 
\hypertarget{group__util__xmodem_ga913fe444bce75fa12169083fbbf9ef03}{int {\bfseries \-\_\-xbee\-\_\-xmodem\-\_\-ser\-\_\-write} (void \hyperlink{group__hal_gaef060b3456fdcc093a7210a762d5f2ed}{F\-A\-R} $\ast$context, const void \hyperlink{group__hal_gaef060b3456fdcc093a7210a762d5f2ed}{F\-A\-R} $\ast$buffer, \hyperlink{group__hal_ga2140805d08462d474b82ddc8d1c2f3e6}{int16\-\_\-t} bytes)}\label{group__util__xmodem_ga913fe444bce75fa12169083fbbf9ef03}

\item 
\-\_\-xmodem\-\_\-debug int \hyperlink{group__util__xmodem_ga728dd61f38b5563fe2ab45bcb982a1e7}{xbee\-\_\-xmodem\-\_\-use\-\_\-serport} (\hyperlink{structxbee__xmodem__state__t}{xbee\-\_\-xmodem\-\_\-state\-\_\-t} $\ast$xbxm, \hyperlink{structxbee__serial__t}{xbee\-\_\-serial\-\_\-t} $\ast$serport)
\begin{DoxyCompactList}\small\item\em Used for xmodem transfers over a simple serial port. \end{DoxyCompactList}\item 
\-\_\-xmodem\-\_\-debug int \hyperlink{group__util__xmodem_ga3153bea635e130326e96720fe354852d}{xbee\-\_\-xmodem\-\_\-set\-\_\-stream} (\hyperlink{structxbee__xmodem__state__t}{xbee\-\_\-xmodem\-\_\-state\-\_\-t} $\ast$xbxm, \hyperlink{group__util__xmodem_gae8f23aee23fead01c5b812e992799ded}{xbee\-\_\-xmodem\-\_\-read\-\_\-fn} read, \hyperlink{group__util__xmodem_gad858784eff97e98dff61dda16fada3b2}{xbee\-\_\-xmodem\-\_\-write\-\_\-fn} write, const void \hyperlink{group__hal_gaef060b3456fdcc093a7210a762d5f2ed}{F\-A\-R} $\ast$context)
\begin{DoxyCompactList}\small\item\em Configure the stream used to communicate with the target. \end{DoxyCompactList}\item 
\-\_\-xmodem\-\_\-debug int \hyperlink{group__util__xmodem_gaa71f0823f6fc8db3f7c556819079b225}{xbee\-\_\-xmodem\-\_\-set\-\_\-source} (\hyperlink{structxbee__xmodem__state__t}{xbee\-\_\-xmodem\-\_\-state\-\_\-t} $\ast$xbxm, void \hyperlink{group__hal_gaef060b3456fdcc093a7210a762d5f2ed}{F\-A\-R} $\ast$buffer, \hyperlink{group__util__xmodem_gae8f23aee23fead01c5b812e992799ded}{xbee\-\_\-xmodem\-\_\-read\-\_\-fn} read, const void \hyperlink{group__hal_gaef060b3456fdcc093a7210a762d5f2ed}{F\-A\-R} $\ast$context)
\begin{DoxyCompactList}\small\item\em Configure the data source for the Xmodem send. \end{DoxyCompactList}\item 
int \hyperlink{group__util__xmodem_gac01df75671906e590a9ed9b0a4644ba1}{\-\_\-xbee\-\_\-xmodem\-\_\-getchar} (\hyperlink{structxbee__xmodem__state__t}{xbee\-\_\-xmodem\-\_\-state\-\_\-t} $\ast$xbxm)
\item 
int \hyperlink{group__util__xmodem_ga0cc061cd92dfa4eba4720b2839698545}{\-\_\-xbee\-\_\-xmodem\-\_\-putchar} (\hyperlink{structxbee__xmodem__state__t}{xbee\-\_\-xmodem\-\_\-state\-\_\-t} $\ast$xbxm, \hyperlink{group__hal_gae1affc9ca37cfb624959c866a73f83c2}{uint8\-\_\-t} ch)
\item 
\-\_\-xmodem\-\_\-debug int \hyperlink{group__util__xmodem_gabc8da474bce7043eef3537bd492c5123}{xbee\-\_\-xmodem\-\_\-tx\-\_\-init} (\hyperlink{structxbee__xmodem__state__t}{xbee\-\_\-xmodem\-\_\-state\-\_\-t} $\ast$xbxm, \hyperlink{group__hal_ga5a8b2dc9e45a9ee81a94ef304fb62505}{uint16\-\_\-t} flags)
\begin{DoxyCompactList}\small\item\em Initialize state structure for use with \hyperlink{group__util__xmodem_ga1de6d8cc3628767d877e854f92ab2b0e}{xbee\-\_\-xmodem\-\_\-tx\-\_\-tick()} to send a file via Xmodem. \end{DoxyCompactList}\item 
\hypertarget{group__util__xmodem_ga96fca6132d78345b4a3c20f89971aede}{\-\_\-xmodem\-\_\-debug int {\bfseries \-\_\-assemble\-\_\-packet} (\hyperlink{structxbee__xmodem__state__t}{xbee\-\_\-xmodem\-\_\-state\-\_\-t} $\ast$xbxm, \hyperlink{group__hal_ga5a8b2dc9e45a9ee81a94ef304fb62505}{uint16\-\_\-t} block\-\_\-size)}\label{group__util__xmodem_ga96fca6132d78345b4a3c20f89971aede}

\item 
\hypertarget{group__util__xmodem_gab3bb5db3c60870f771cae1268fa24eb4}{\-\_\-xmodem\-\_\-debug \hyperlink{group__hal_ga5a8b2dc9e45a9ee81a94ef304fb62505}{uint16\-\_\-t} {\bfseries \-\_\-block\-\_\-size} (\hyperlink{structxbee__xmodem__state__t}{xbee\-\_\-xmodem\-\_\-state\-\_\-t} $\ast$xbxm)}\label{group__util__xmodem_gab3bb5db3c60870f771cae1268fa24eb4}

\item 
\-\_\-xmodem\-\_\-debug int \hyperlink{group__util__xmodem_ga1de6d8cc3628767d877e854f92ab2b0e}{xbee\-\_\-xmodem\-\_\-tx\-\_\-tick} (\hyperlink{structxbee__xmodem__state__t}{xbee\-\_\-xmodem\-\_\-state\-\_\-t} $\ast$xbxm)
\begin{DoxyCompactList}\small\item\em Function to drive the Xmodem send state machine. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
const \hyperlink{group__hal_gaef060b3456fdcc093a7210a762d5f2ed}{F\-A\-R} \hyperlink{group__hal_ga5a8b2dc9e45a9ee81a94ef304fb62505}{uint16\-\_\-t} \hyperlink{group__util__xmodem_gab903230030042c3ee444aa887b705e06}{crc16\-\_\-table} \mbox{[}256\mbox{]}
\begin{DoxyCompactList}\small\item\em Table for X\-M\-O\-D\-E\-M and \char`\"{}\-False C\-C\-I\-T\-T\char`\"{} C\-R\-C, calculated with standard 0x1021 polynomial. \end{DoxyCompactList}\item 
\hypertarget{group__util__xmodem_ga1e87af3c18a2fd36c61faf89949bdc3f}{\hyperlink{group__hal_ga5a8b2dc9e45a9ee81a94ef304fb62505}{uint16\-\_\-t} \hyperlink{group__util__xmodem_ga1e87af3c18a2fd36c61faf89949bdc3f}{flags}}\label{group__util__xmodem_ga1e87af3c18a2fd36c61faf89949bdc3f}

\begin{DoxyCompactList}\small\item\em flags for tracking state of transfer \end{DoxyCompactList}\item 
\hypertarget{group__util__xmodem_ga59de4bab5575291b6b4ace70d7e50af5}{\hyperlink{group__hal_ga5a8b2dc9e45a9ee81a94ef304fb62505}{uint16\-\_\-t} \hyperlink{group__util__xmodem_ga59de4bab5575291b6b4ace70d7e50af5}{packet\-\_\-num}}\label{group__util__xmodem_ga59de4bab5575291b6b4ace70d7e50af5}

\begin{DoxyCompactList}\small\item\em current packet number; starts at 1 and low byte used in block headers \end{DoxyCompactList}\item 
\hypertarget{group__util__xmodem_gaea00c2c1dec6e8f58532f25c65210d9e}{\hyperlink{group__hal_ga5a8b2dc9e45a9ee81a94ef304fb62505}{uint16\-\_\-t} \hyperlink{group__util__xmodem_gaea00c2c1dec6e8f58532f25c65210d9e}{timer}}\label{group__util__xmodem_gaea00c2c1dec6e8f58532f25c65210d9e}

\begin{DoxyCompactList}\small\item\em timer value used to hold low word of xbee\-\_\-millisecond\-\_\-timer() \end{DoxyCompactList}\item 
\hypertarget{group__util__xmodem_ga73b81fc5d708360fbba38aee9bc2eac0}{enum \hyperlink{group__util__xmodem_gaca3fc49d80cd9afccc34812b2985484f}{xbee\-\_\-xmodem\-\_\-state} \hyperlink{group__util__xmodem_ga73b81fc5d708360fbba38aee9bc2eac0}{state}}\label{group__util__xmodem_ga73b81fc5d708360fbba38aee9bc2eac0}

\begin{DoxyCompactList}\small\item\em current state of transfer \end{DoxyCompactList}\item 
\hypertarget{group__util__xmodem_ga8623a9a322bbc93025b7c3337ed8849e}{uint\-\_\-fast8\-\_\-t \hyperlink{group__util__xmodem_ga8623a9a322bbc93025b7c3337ed8849e}{tries}}\label{group__util__xmodem_ga8623a9a322bbc93025b7c3337ed8849e}

\begin{DoxyCompactList}\small\item\em \subsection*{of tries left before giving up}\end{DoxyCompactList}\item 
\hypertarget{group__util__xmodem_gaed7ea92f45bd273dde380a45ddced592}{int \hyperlink{group__util__xmodem_gaed7ea92f45bd273dde380a45ddced592}{offset}}\label{group__util__xmodem_gaed7ea92f45bd273dde380a45ddced592}

\begin{DoxyCompactList}\small\item\em offset into packet being sent \end{DoxyCompactList}\item 
\hypertarget{group__util__xmodem_ga747adede719506ced8838721ed104364}{char \hyperlink{group__hal_gaef060b3456fdcc093a7210a762d5f2ed}{F\-A\-R} $\ast$ \hyperlink{group__util__xmodem_ga747adede719506ced8838721ed104364}{buffer}}\label{group__util__xmodem_ga747adede719506ced8838721ed104364}

\begin{DoxyCompactList}\small\item\em buffer we can use \end{DoxyCompactList}\item 
\hyperlink{group__util__xmodem_gae8f23aee23fead01c5b812e992799ded}{xbee\-\_\-xmodem\-\_\-read\-\_\-fn} \hyperlink{group__util__xmodem_gac73e7e9b654a58e232f8c1380cd68dfa}{read}
\begin{DoxyCompactList}\small\item\em source of bytes to send \end{DoxyCompactList}\item 
void \hyperlink{group__hal_gaef060b3456fdcc093a7210a762d5f2ed}{F\-A\-R} $\ast$ \hyperlink{group__util__xmodem_gaa91f8e864e06077c354e5f5216547758}{context}
\begin{DoxyCompactList}\small\item\em context for file.\-read() \end{DoxyCompactList}\item 
\hypertarget{group__util__xmodem_ga562f44295cfab2905a4e625861825a59}{\begin{tabbing}
xx\=xx\=xx\=xx\=xx\=xx\=xx\=xx\=xx\=\kill
struct \{\\
\>\hyperlink{group__util__xmodem_gae8f23aee23fead01c5b812e992799ded}{xbee\_xmodem\_read\_fn} \hyperlink{group__util__xmodem_gac73e7e9b654a58e232f8c1380cd68dfa}{read}\\
\>\>{\em source of bytes to send }\\
\>void \hyperlink{group__hal_gaef060b3456fdcc093a7210a762d5f2ed}{FAR} $\ast$ \hyperlink{group__util__xmodem_gaa91f8e864e06077c354e5f5216547758}{context}\\
\>\>{\em context for file.read() }\\
\} \hyperlink{group__util__xmodem_ga562f44295cfab2905a4e625861825a59}{file}}\label{group__util__xmodem_ga562f44295cfab2905a4e625861825a59}
\\

\end{tabbing}\begin{DoxyCompactList}\small\item\em function and context to read source of sent data \end{DoxyCompactList}\item 
\hyperlink{group__util__xmodem_gae8f23aee23fead01c5b812e992799ded}{xbee\-\_\-xmodem\-\_\-read\-\_\-fn} \hyperlink{group__util__xmodem_gac73e7e9b654a58e232f8c1380cd68dfa}{read}
\begin{DoxyCompactList}\small\item\em read response bytes from target \end{DoxyCompactList}\item 
\hyperlink{group__util__xmodem_gad858784eff97e98dff61dda16fada3b2}{xbee\-\_\-xmodem\-\_\-write\-\_\-fn} \hyperlink{group__util__xmodem_ga4224f3519ed62f804de9c45d0a409f94}{write}
\begin{DoxyCompactList}\small\item\em send blocks to target \end{DoxyCompactList}\item 
void \hyperlink{group__hal_gaef060b3456fdcc093a7210a762d5f2ed}{F\-A\-R} $\ast$ \hyperlink{group__util__xmodem_gaa91f8e864e06077c354e5f5216547758}{context}
\begin{DoxyCompactList}\small\item\em context for stream.\-read \& .write \end{DoxyCompactList}\item 
\hypertarget{group__util__xmodem_gac9e2099087190f80f9f0dd85363100b2}{\begin{tabbing}
xx\=xx\=xx\=xx\=xx\=xx\=xx\=xx\=xx\=\kill
struct \{\\
\>\hyperlink{group__util__xmodem_gae8f23aee23fead01c5b812e992799ded}{xbee\_xmodem\_read\_fn} \hyperlink{group__util__xmodem_gac73e7e9b654a58e232f8c1380cd68dfa}{read}\\
\>\>{\em read response bytes from target }\\
\>\hyperlink{group__util__xmodem_gad858784eff97e98dff61dda16fada3b2}{xbee\_xmodem\_write\_fn} \hyperlink{group__util__xmodem_ga4224f3519ed62f804de9c45d0a409f94}{write}\\
\>\>{\em send blocks to target }\\
\>void \hyperlink{group__hal_gaef060b3456fdcc093a7210a762d5f2ed}{FAR} $\ast$ \hyperlink{group__util__xmodem_gaa91f8e864e06077c354e5f5216547758}{context}\\
\>\>{\em context for stream.read \& .write }\\
\} \hyperlink{group__util__xmodem_gac9e2099087190f80f9f0dd85363100b2}{stream}}\label{group__util__xmodem_gac9e2099087190f80f9f0dd85363100b2}
\\

\end{tabbing}\begin{DoxyCompactList}\small\item\em functions and context to communicate with target device \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Xmodem Control Characters}
\begin{DoxyCompactItemize}
\item 
\hypertarget{group__util__xmodem_ga23d8e7fbbf55d1899984aad6f2dd0c77}{\#define \hyperlink{group__util__xmodem_ga23d8e7fbbf55d1899984aad6f2dd0c77}{X\-M\-O\-D\-E\-M\-\_\-\-N\-A\-K}~0x15}\label{group__util__xmodem_ga23d8e7fbbf55d1899984aad6f2dd0c77}

\begin{DoxyCompactList}\small\item\em receiver requests X\-M\-O\-D\-E\-M (with checksum), or did not receive last block \end{DoxyCompactList}\item 
\hypertarget{group__util__xmodem_ga5a28173b1f4d064e2b81c71394fe0d82}{\#define \hyperlink{group__util__xmodem_ga5a28173b1f4d064e2b81c71394fe0d82}{X\-M\-O\-D\-E\-M\-\_\-\-C\-R\-C}~'C'}\label{group__util__xmodem_ga5a28173b1f4d064e2b81c71394fe0d82}

\begin{DoxyCompactList}\small\item\em receiver requests X\-M\-O\-D\-E\-M-\/\-C\-R\-C \end{DoxyCompactList}\item 
\hypertarget{group__util__xmodem_ga516766421552c726b2859228d39b867e}{\#define \hyperlink{group__util__xmodem_ga516766421552c726b2859228d39b867e}{X\-M\-O\-D\-E\-M\-\_\-\-S\-O\-H}~0x01}\label{group__util__xmodem_ga516766421552c726b2859228d39b867e}

\begin{DoxyCompactList}\small\item\em start of 128-\/byte block \end{DoxyCompactList}\item 
\hypertarget{group__util__xmodem_ga743b9b571f66fa34a38f8c23407a206f}{\#define \hyperlink{group__util__xmodem_ga743b9b571f66fa34a38f8c23407a206f}{X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-X}~0x02}\label{group__util__xmodem_ga743b9b571f66fa34a38f8c23407a206f}

\begin{DoxyCompactList}\small\item\em start of 1024-\/byte block \end{DoxyCompactList}\item 
\hypertarget{group__util__xmodem_ga15cc4ebc5babe213c14409b8dcc08151}{\#define \hyperlink{group__util__xmodem_ga15cc4ebc5babe213c14409b8dcc08151}{X\-M\-O\-D\-E\-M\-\_\-\-A\-C\-K}~0x06}\label{group__util__xmodem_ga15cc4ebc5babe213c14409b8dcc08151}

\begin{DoxyCompactList}\small\item\em acknowledge receipt of block \end{DoxyCompactList}\item 
\hypertarget{group__util__xmodem_ga98471c6c9e395769b006dabdfcbf6990}{\#define \hyperlink{group__util__xmodem_ga98471c6c9e395769b006dabdfcbf6990}{X\-M\-O\-D\-E\-M\-\_\-\-C\-A\-N}~0x18}\label{group__util__xmodem_ga98471c6c9e395769b006dabdfcbf6990}

\begin{DoxyCompactList}\small\item\em cancel transmission \end{DoxyCompactList}\item 
\hypertarget{group__util__xmodem_gad06c7c58d8c4d733f356bbd48502c7f1}{\#define \hyperlink{group__util__xmodem_gad06c7c58d8c4d733f356bbd48502c7f1}{X\-M\-O\-D\-E\-M\-\_\-\-E\-O\-T}~0x04}\label{group__util__xmodem_gad06c7c58d8c4d733f356bbd48502c7f1}

\begin{DoxyCompactList}\small\item\em sender is ending transmission \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Values for \textbackslash{}c flags member of xbee\-\_\-xmodem\-\_\-state\-\_\-t}
\begin{DoxyCompactItemize}
\item 
\hypertarget{group__util__xmodem_ga04349c37c905b515c4a61bbfbfefcac9}{\#define \hyperlink{group__util__xmodem_ga04349c37c905b515c4a61bbfbfefcac9}{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-F\-L\-A\-G\-\_\-\-N\-O\-N\-E}~0x0000}\label{group__util__xmodem_ga04349c37c905b515c4a61bbfbfefcac9}

\begin{DoxyCompactList}\small\item\em macro for \char`\"{}no flags\char`\"{}, used when calling xbee\-\_\-xmodem\-\_\-tx\-\_\-init \end{DoxyCompactList}\item 
\hypertarget{group__util__xmodem_ga3410ae9b9e3d434bb735ba6b6705f9f4}{\#define \hyperlink{group__util__xmodem_ga3410ae9b9e3d434bb735ba6b6705f9f4}{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-F\-L\-A\-G\-\_\-\-C\-H\-E\-C\-K\-S\-U\-M}~0x0001}\label{group__util__xmodem_ga3410ae9b9e3d434bb735ba6b6705f9f4}

\begin{DoxyCompactList}\small\item\em blocks end with a 1-\/byte checksum \end{DoxyCompactList}\item 
\hypertarget{group__util__xmodem_ga84ededd1cb6ac229e18cd5936943aa9e}{\#define \hyperlink{group__util__xmodem_ga84ededd1cb6ac229e18cd5936943aa9e}{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-F\-L\-A\-G\-\_\-\-C\-R\-C}~0x0002}\label{group__util__xmodem_ga84ededd1cb6ac229e18cd5936943aa9e}

\begin{DoxyCompactList}\small\item\em blocks end with a 16-\/bit C\-R\-C \end{DoxyCompactList}\item 
\hypertarget{group__util__xmodem_ga6c1de4e76820a95412e7db3faa9fd250}{\#define \hyperlink{group__util__xmodem_ga6c1de4e76820a95412e7db3faa9fd250}{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-F\-L\-A\-G\-\_\-\-F\-O\-R\-C\-E\-\_\-\-C\-R\-C}~0x0008}\label{group__util__xmodem_ga6c1de4e76820a95412e7db3faa9fd250}

\begin{DoxyCompactList}\small\item\em force use of X\-M\-O\-D\-E\-M-\/\-C\-R\-C (by ignoring N\-A\-K at start of transfer) \end{DoxyCompactList}\item 
\hypertarget{group__util__xmodem_gaaf04a39f137887085821e34f3e808ee1}{\#define \hyperlink{group__util__xmodem_gaaf04a39f137887085821e34f3e808ee1}{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-M\-A\-S\-K\-\_\-\-B\-L\-O\-C\-K\-S\-I\-Z\-E}~0x0300}\label{group__util__xmodem_gaaf04a39f137887085821e34f3e808ee1}

\begin{DoxyCompactList}\small\item\em mask for determining block size \end{DoxyCompactList}\item 
\hypertarget{group__util__xmodem_ga46eeab5e2a5ef0efbdb5f0706fa9f26c}{\#define \hyperlink{group__util__xmodem_ga46eeab5e2a5ef0efbdb5f0706fa9f26c}{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-F\-L\-A\-G\-\_\-128}~0x0000}\label{group__util__xmodem_ga46eeab5e2a5ef0efbdb5f0706fa9f26c}

\begin{DoxyCompactList}\small\item\em 128-\/byte blocks (default setting) \end{DoxyCompactList}\item 
\hypertarget{group__util__xmodem_ga9c55ba56c6cba75308ee8b0b8594a6c4}{\#define \hyperlink{group__util__xmodem_ga9c55ba56c6cba75308ee8b0b8594a6c4}{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-F\-L\-A\-G\-\_\-64}~0x0100}\label{group__util__xmodem_ga9c55ba56c6cba75308ee8b0b8594a6c4}

\begin{DoxyCompactList}\small\item\em 64-\/byte blocks -- non-\/standard block size used for O\-T\-A updates \end{DoxyCompactList}\item 
\hypertarget{group__util__xmodem_ga2a13979799d1a7ef697025608545f995}{\#define \hyperlink{group__util__xmodem_ga2a13979799d1a7ef697025608545f995}{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-F\-L\-A\-G\-\_\-1\-K}~0x0200}\label{group__util__xmodem_ga2a13979799d1a7ef697025608545f995}

\begin{DoxyCompactList}\small\item\em 1\-K\-B blocks \end{DoxyCompactList}\item 
\hypertarget{group__util__xmodem_ga177f2ec8f42b568c7f461f729f00bf2b}{\#define \hyperlink{group__util__xmodem_ga177f2ec8f42b568c7f461f729f00bf2b}{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-F\-L\-A\-G\-\_\-1024}~\hyperlink{group__util__xmodem_ga2a13979799d1a7ef697025608545f995}{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-F\-L\-A\-G\-\_\-1\-K}}\label{group__util__xmodem_ga177f2ec8f42b568c7f461f729f00bf2b}

\begin{DoxyCompactList}\small\item\em alternate macro name for \hyperlink{group__util__xmodem_ga2a13979799d1a7ef697025608545f995}{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-F\-L\-A\-G\-\_\-1\-K} \end{DoxyCompactList}\item 
\hypertarget{group__util__xmodem_ga6e934cd774ca499fd24333c2d7ef4bda}{\#define \hyperlink{group__util__xmodem_ga6e934cd774ca499fd24333c2d7ef4bda}{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-F\-L\-A\-G\-\_\-\-U\-S\-E\-R}~(\hyperlink{group__util__xmodem_gaaf04a39f137887085821e34f3e808ee1}{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-M\-A\-S\-K\-\_\-\-B\-L\-O\-C\-K\-S\-I\-Z\-E} $|$ \hyperlink{group__util__xmodem_ga6c1de4e76820a95412e7db3faa9fd250}{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-F\-L\-A\-G\-\_\-\-F\-O\-R\-C\-E\-\_\-\-C\-R\-C})}\label{group__util__xmodem_ga6e934cd774ca499fd24333c2d7ef4bda}

\begin{DoxyCompactList}\small\item\em mask of user-\/settable flags that can be passed to xbee\-\_\-xmodem\-\_\-tx\-\_\-init \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}


\subsection{Typedef Documentation}
\hypertarget{group__util__xmodem_gae8f23aee23fead01c5b812e992799ded}{\index{X\-M\-O\-D\-E\-M code used by the firmware update process@{X\-M\-O\-D\-E\-M code used by the firmware update process}!xbee\-\_\-xmodem\-\_\-read\-\_\-fn@{xbee\-\_\-xmodem\-\_\-read\-\_\-fn}}
\index{xbee\-\_\-xmodem\-\_\-read\-\_\-fn@{xbee\-\_\-xmodem\-\_\-read\-\_\-fn}!XMODEM code used by the firmware update process@{X\-M\-O\-D\-E\-M code used by the firmware update process}}
\subsubsection[{xbee\-\_\-xmodem\-\_\-read\-\_\-fn}]{\setlength{\rightskip}{0pt plus 5cm}typedef int($\ast$ xbee\-\_\-xmodem\-\_\-read\-\_\-fn)(void {\bf F\-A\-R} $\ast$context, void {\bf F\-A\-R} $\ast$buffer, {\bf int16\-\_\-t} bytes)}}\label{group__util__xmodem_gae8f23aee23fead01c5b812e992799ded}


Function to assign to {\ttfamily file.\-read} or {\ttfamily stream.\-read} member of an \hyperlink{structxbee__xmodem__state__t}{xbee\-\_\-xmodem\-\_\-state\-\_\-t} object. 

Used to read data from the Xmodem receiver (A\-C\-K/\-N\-A\-K bytes) or the firmware source (e.\-g., file or embedded array).


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & either {\ttfamily file.\-context} or {\ttfamily stream.\-context} from the \hyperlink{structxbee__xmodem__state__t}{xbee\-\_\-xmodem\-\_\-state\-\_\-t} object \\
\hline
\mbox{\tt in,out}  & {\em buffer} & buffer to store read data \\
\hline
\mbox{\tt in}  & {\em bytes} & maximum number of bytes to write to {\ttfamily buffer} \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em $>$0} & number of bytes read \\
\hline
{\em -\/\-E\-N\-O\-D\-A\-T\-A} & no more bytes to read \\
\hline
{\em -\/\-E\-I\-N\-V\-A\-L} & N\-U\-L\-L pointer or negative byte count passed to function \\
\hline
{\em 0} & no more bytes to read \\
\hline
\end{DoxyRetVals}
\hypertarget{group__util__xmodem_gad858784eff97e98dff61dda16fada3b2}{\index{X\-M\-O\-D\-E\-M code used by the firmware update process@{X\-M\-O\-D\-E\-M code used by the firmware update process}!xbee\-\_\-xmodem\-\_\-write\-\_\-fn@{xbee\-\_\-xmodem\-\_\-write\-\_\-fn}}
\index{xbee\-\_\-xmodem\-\_\-write\-\_\-fn@{xbee\-\_\-xmodem\-\_\-write\-\_\-fn}!XMODEM code used by the firmware update process@{X\-M\-O\-D\-E\-M code used by the firmware update process}}
\subsubsection[{xbee\-\_\-xmodem\-\_\-write\-\_\-fn}]{\setlength{\rightskip}{0pt plus 5cm}typedef int($\ast$ xbee\-\_\-xmodem\-\_\-write\-\_\-fn)(void {\bf F\-A\-R} $\ast$context, const void {\bf F\-A\-R} $\ast$buffer, {\bf int16\-\_\-t} bytes)}}\label{group__util__xmodem_gad858784eff97e98dff61dda16fada3b2}


Function to assign to {\ttfamily stream.\-write} member of an \hyperlink{structxbee__xmodem__state__t}{xbee\-\_\-xmodem\-\_\-state\-\_\-t} object. 

Used to write data to the Xmodem receiver (blocks of data).


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & {\ttfamily stream.\-context} \\
\hline
\mbox{\tt in}  & {\em buffer} & bytes to send to the receiver \\
\hline
\mbox{\tt in}  & {\em bytes} & number of bytes to send\\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em $>$=0} & number of bytes sent \\
\hline
{\em -\/\-E\-I\-N\-V\-A\-L} & N\-U\-L\-L pointer or negative byte count passed to function \\
\hline
{\em $<$0} & irrecoverable error \\
\hline
\end{DoxyRetVals}


\subsection{Enumeration Type Documentation}
\hypertarget{group__util__xmodem_gaca3fc49d80cd9afccc34812b2985484f}{\index{X\-M\-O\-D\-E\-M code used by the firmware update process@{X\-M\-O\-D\-E\-M code used by the firmware update process}!xbee\-\_\-xmodem\-\_\-state@{xbee\-\_\-xmodem\-\_\-state}}
\index{xbee\-\_\-xmodem\-\_\-state@{xbee\-\_\-xmodem\-\_\-state}!XMODEM code used by the firmware update process@{X\-M\-O\-D\-E\-M code used by the firmware update process}}
\subsubsection[{xbee\-\_\-xmodem\-\_\-state}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf xbee\-\_\-xmodem\-\_\-state}}}\label{group__util__xmodem_gaca3fc49d80cd9afccc34812b2985484f}


Values for {\ttfamily state} member of \hyperlink{structxbee__xmodem__state__t}{xbee\-\_\-xmodem\-\_\-state\-\_\-t}. 

\begin{Desc}
\item[Enumerator\-: ]\par
\begin{description}
\index{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-F\-L\-U\-S\-H@{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-F\-L\-U\-S\-H}!X\-M\-O\-D\-E\-M code used by the firmware update process@{X\-M\-O\-D\-E\-M code used by the firmware update process}}\index{X\-M\-O\-D\-E\-M code used by the firmware update process@{X\-M\-O\-D\-E\-M code used by the firmware update process}!X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-F\-L\-U\-S\-H@{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-F\-L\-U\-S\-H}}\item[{\em 
\hypertarget{group__util__xmodem_ggaca3fc49d80cd9afccc34812b2985484fa0a84e83220282fadef6bcee5b42fd02f}{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-F\-L\-U\-S\-H}\label{group__util__xmodem_ggaca3fc49d80cd9afccc34812b2985484fa0a84e83220282fadef6bcee5b42fd02f}
}]flush receive buffer and wait \index{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-S\-T\-A\-R\-T@{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-S\-T\-A\-R\-T}!X\-M\-O\-D\-E\-M code used by the firmware update process@{X\-M\-O\-D\-E\-M code used by the firmware update process}}\index{X\-M\-O\-D\-E\-M code used by the firmware update process@{X\-M\-O\-D\-E\-M code used by the firmware update process}!X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-S\-T\-A\-R\-T@{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-S\-T\-A\-R\-T}}\item[{\em 
\hypertarget{group__util__xmodem_ggaca3fc49d80cd9afccc34812b2985484fa35f508b4cdce4d950e327aa7fe73e9df}{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-S\-T\-A\-R\-T}\label{group__util__xmodem_ggaca3fc49d80cd9afccc34812b2985484fa35f508b4cdce4d950e327aa7fe73e9df}
}]waiting for N\-A\-K or C\-R\-C char \index{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-S\-E\-N\-D@{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-S\-E\-N\-D}!X\-M\-O\-D\-E\-M code used by the firmware update process@{X\-M\-O\-D\-E\-M code used by the firmware update process}}\index{X\-M\-O\-D\-E\-M code used by the firmware update process@{X\-M\-O\-D\-E\-M code used by the firmware update process}!X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-S\-E\-N\-D@{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-S\-E\-N\-D}}\item[{\em 
\hypertarget{group__util__xmodem_ggaca3fc49d80cd9afccc34812b2985484fa53ac0249ccdeb684c78baee336d65187}{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-S\-E\-N\-D}\label{group__util__xmodem_ggaca3fc49d80cd9afccc34812b2985484fa53ac0249ccdeb684c78baee336d65187}
}]start of another packet \index{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-R\-E\-S\-E\-N\-D@{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-R\-E\-S\-E\-N\-D}!X\-M\-O\-D\-E\-M code used by the firmware update process@{X\-M\-O\-D\-E\-M code used by the firmware update process}}\index{X\-M\-O\-D\-E\-M code used by the firmware update process@{X\-M\-O\-D\-E\-M code used by the firmware update process}!X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-R\-E\-S\-E\-N\-D@{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-R\-E\-S\-E\-N\-D}}\item[{\em 
\hypertarget{group__util__xmodem_ggaca3fc49d80cd9afccc34812b2985484facb6bc4306d97a0b11b1ad879725df3b5}{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-R\-E\-S\-E\-N\-D}\label{group__util__xmodem_ggaca3fc49d80cd9afccc34812b2985484facb6bc4306d97a0b11b1ad879725df3b5}
}]resend last packet \index{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-S\-E\-N\-D\-I\-N\-G@{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-S\-E\-N\-D\-I\-N\-G}!X\-M\-O\-D\-E\-M code used by the firmware update process@{X\-M\-O\-D\-E\-M code used by the firmware update process}}\index{X\-M\-O\-D\-E\-M code used by the firmware update process@{X\-M\-O\-D\-E\-M code used by the firmware update process}!X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-S\-E\-N\-D\-I\-N\-G@{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-S\-E\-N\-D\-I\-N\-G}}\item[{\em 
\hypertarget{group__util__xmodem_ggaca3fc49d80cd9afccc34812b2985484fac9e012359b6cf5f45ea6f2f5f9d76d4d}{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-S\-E\-N\-D\-I\-N\-G}\label{group__util__xmodem_ggaca3fc49d80cd9afccc34812b2985484fac9e012359b6cf5f45ea6f2f5f9d76d4d}
}]sending bytes of packet \index{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-W\-A\-I\-T\-\_\-\-A\-C\-K@{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-W\-A\-I\-T\-\_\-\-A\-C\-K}!X\-M\-O\-D\-E\-M code used by the firmware update process@{X\-M\-O\-D\-E\-M code used by the firmware update process}}\index{X\-M\-O\-D\-E\-M code used by the firmware update process@{X\-M\-O\-D\-E\-M code used by the firmware update process}!X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-W\-A\-I\-T\-\_\-\-A\-C\-K@{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-W\-A\-I\-T\-\_\-\-A\-C\-K}}\item[{\em 
\hypertarget{group__util__xmodem_ggaca3fc49d80cd9afccc34812b2985484fad7ce55b9d8ec65fa4f8410590cb67eaa}{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-W\-A\-I\-T\-\_\-\-A\-C\-K}\label{group__util__xmodem_ggaca3fc49d80cd9afccc34812b2985484fad7ce55b9d8ec65fa4f8410590cb67eaa}
}]waiting for A\-C\-K of current packet \index{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-E\-O\-F@{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-E\-O\-F}!X\-M\-O\-D\-E\-M code used by the firmware update process@{X\-M\-O\-D\-E\-M code used by the firmware update process}}\index{X\-M\-O\-D\-E\-M code used by the firmware update process@{X\-M\-O\-D\-E\-M code used by the firmware update process}!X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-E\-O\-F@{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-E\-O\-F}}\item[{\em 
\hypertarget{group__util__xmodem_ggaca3fc49d80cd9afccc34812b2985484fac0f165be362c1a05448acb718d15299c}{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-E\-O\-F}\label{group__util__xmodem_ggaca3fc49d80cd9afccc34812b2985484fac0f165be362c1a05448acb718d15299c}
}]reached end of file, close connection \index{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-F\-I\-N\-A\-L\-\_\-\-A\-C\-K@{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-F\-I\-N\-A\-L\-\_\-\-A\-C\-K}!X\-M\-O\-D\-E\-M code used by the firmware update process@{X\-M\-O\-D\-E\-M code used by the firmware update process}}\index{X\-M\-O\-D\-E\-M code used by the firmware update process@{X\-M\-O\-D\-E\-M code used by the firmware update process}!X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-F\-I\-N\-A\-L\-\_\-\-A\-C\-K@{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-F\-I\-N\-A\-L\-\_\-\-A\-C\-K}}\item[{\em 
\hypertarget{group__util__xmodem_ggaca3fc49d80cd9afccc34812b2985484fae1a85fb72853aa9b4b2b1ef7734315a4}{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-F\-I\-N\-A\-L\-\_\-\-A\-C\-K}\label{group__util__xmodem_ggaca3fc49d80cd9afccc34812b2985484fae1a85fb72853aa9b4b2b1ef7734315a4}
}]waiting for final A\-C\-K from receiver \index{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-S\-U\-C\-C\-E\-S\-S@{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-S\-U\-C\-C\-E\-S\-S}!X\-M\-O\-D\-E\-M code used by the firmware update process@{X\-M\-O\-D\-E\-M code used by the firmware update process}}\index{X\-M\-O\-D\-E\-M code used by the firmware update process@{X\-M\-O\-D\-E\-M code used by the firmware update process}!X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-S\-U\-C\-C\-E\-S\-S@{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-S\-U\-C\-C\-E\-S\-S}}\item[{\em 
\hypertarget{group__util__xmodem_ggaca3fc49d80cd9afccc34812b2985484fac17280139c0e7d88f3c6371bda3f7123}{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-S\-U\-C\-C\-E\-S\-S}\label{group__util__xmodem_ggaca3fc49d80cd9afccc34812b2985484fac17280139c0e7d88f3c6371bda3f7123}
}]completed transfer was successful \index{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-F\-A\-I\-L\-U\-R\-E@{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-F\-A\-I\-L\-U\-R\-E}!X\-M\-O\-D\-E\-M code used by the firmware update process@{X\-M\-O\-D\-E\-M code used by the firmware update process}}\index{X\-M\-O\-D\-E\-M code used by the firmware update process@{X\-M\-O\-D\-E\-M code used by the firmware update process}!X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-F\-A\-I\-L\-U\-R\-E@{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-F\-A\-I\-L\-U\-R\-E}}\item[{\em 
\hypertarget{group__util__xmodem_ggaca3fc49d80cd9afccc34812b2985484faf97088a6d2705daabd8e016542aa112e}{X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-F\-A\-I\-L\-U\-R\-E}\label{group__util__xmodem_ggaca3fc49d80cd9afccc34812b2985484faf97088a6d2705daabd8e016542aa112e}
}]transfer failed \end{description}
\end{Desc}



\subsection{Function Documentation}
\hypertarget{group__util__xmodem_gac01df75671906e590a9ed9b0a4644ba1}{\index{X\-M\-O\-D\-E\-M code used by the firmware update process@{X\-M\-O\-D\-E\-M code used by the firmware update process}!\-\_\-xbee\-\_\-xmodem\-\_\-getchar@{\-\_\-xbee\-\_\-xmodem\-\_\-getchar}}
\index{\-\_\-xbee\-\_\-xmodem\-\_\-getchar@{\-\_\-xbee\-\_\-xmodem\-\_\-getchar}!XMODEM code used by the firmware update process@{X\-M\-O\-D\-E\-M code used by the firmware update process}}
\subsubsection[{\-\_\-xbee\-\_\-xmodem\-\_\-getchar}]{\setlength{\rightskip}{0pt plus 5cm}\-\_\-xmodem\-\_\-debug int \-\_\-xbee\-\_\-xmodem\-\_\-getchar (
\begin{DoxyParamCaption}
\item[{{\bf xbee\-\_\-xmodem\-\_\-state\-\_\-t} $\ast$}]{xbxm}
\end{DoxyParamCaption}
)}}\label{group__util__xmodem_gac01df75671906e590a9ed9b0a4644ba1}
Helper function to read a single character from the stream.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em xbxm} & state structure\\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em 0-\/255} & character read from stream \\
\hline
{\em -\/\-E\-N\-O\-D\-A\-T\-A} & stream is empty \\
\hline
{\em $<$0} & error reading from stream \\
\hline
\end{DoxyRetVals}


References xbee\-\_\-xmodem\-\_\-state\-\_\-t\-::context, E\-N\-O\-D\-A\-T\-A, xbee\-\_\-xmodem\-\_\-state\-\_\-t\-::read, and xbee\-\_\-xmodem\-\_\-state\-\_\-t\-::stream.



Referenced by xbee\-\_\-xmodem\-\_\-tx\-\_\-tick().

\hypertarget{group__util__xmodem_ga0cc061cd92dfa4eba4720b2839698545}{\index{X\-M\-O\-D\-E\-M code used by the firmware update process@{X\-M\-O\-D\-E\-M code used by the firmware update process}!\-\_\-xbee\-\_\-xmodem\-\_\-putchar@{\-\_\-xbee\-\_\-xmodem\-\_\-putchar}}
\index{\-\_\-xbee\-\_\-xmodem\-\_\-putchar@{\-\_\-xbee\-\_\-xmodem\-\_\-putchar}!XMODEM code used by the firmware update process@{X\-M\-O\-D\-E\-M code used by the firmware update process}}
\subsubsection[{\-\_\-xbee\-\_\-xmodem\-\_\-putchar}]{\setlength{\rightskip}{0pt plus 5cm}\-\_\-xmodem\-\_\-debug int \-\_\-xbee\-\_\-xmodem\-\_\-putchar (
\begin{DoxyParamCaption}
\item[{{\bf xbee\-\_\-xmodem\-\_\-state\-\_\-t} $\ast$}]{xbxm, }
\item[{{\bf uint8\-\_\-t}}]{ch}
\end{DoxyParamCaption}
)}}\label{group__util__xmodem_ga0cc061cd92dfa4eba4720b2839698545}
Helper function to write a single character to the stream.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em xbxm} & state structure \\
\hline
\mbox{\tt in}  & {\em ch} & character to write\\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em 0} & character was written to stream \\
\hline
{\em -\/\-E\-N\-O\-S\-P\-C} & could not write to stream \\
\hline
{\em $<$0} & error writing to stream \\
\hline
\end{DoxyRetVals}


References xbee\-\_\-xmodem\-\_\-state\-\_\-t\-::context, E\-N\-O\-S\-P\-C, xbee\-\_\-xmodem\-\_\-state\-\_\-t\-::stream, and xbee\-\_\-xmodem\-\_\-state\-\_\-t\-::write.



Referenced by xbee\-\_\-xmodem\-\_\-tx\-\_\-tick().

\hypertarget{group__util__xmodem_ga48b65051c5461be6d016802e2eb8a138}{\index{X\-M\-O\-D\-E\-M code used by the firmware update process@{X\-M\-O\-D\-E\-M code used by the firmware update process}!crc16\-\_\-calc@{crc16\-\_\-calc}}
\index{crc16\-\_\-calc@{crc16\-\_\-calc}!XMODEM code used by the firmware update process@{X\-M\-O\-D\-E\-M code used by the firmware update process}}
\subsubsection[{crc16\-\_\-calc}]{\setlength{\rightskip}{0pt plus 5cm}{\bf X\-B\-E\-E\-\_\-\-B\-E\-G\-I\-N\-\_\-\-D\-E\-C\-L\-S} {\bf uint16\-\_\-t} crc16\-\_\-calc (
\begin{DoxyParamCaption}
\item[{const void {\bf F\-A\-R} $\ast$}]{data, }
\item[{{\bf uint16\-\_\-t}}]{length, }
\item[{{\bf uint16\-\_\-t}}]{current}
\end{DoxyParamCaption}
)}}\label{group__util__xmodem_ga48b65051c5461be6d016802e2eb8a138}


Calculate C\-R\-C-\/16 of a data buffer using polynomial (0x1021) without reflection. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em data} & pointer to data to C\-R\-C\\
\hline
\mbox{\tt in}  & {\em length} & number of bytes to C\-R\-C\\
\hline
\mbox{\tt in}  & {\em current} & When calculating a C\-R\-C-\/16 over a stream or a large range of bytes, it is necessary to call crc16\-\_\-calc multiple times.\\
\hline
\end{DoxyParams}

\begin{DoxyItemize}
\item Use an initial value of 0x0000 to generate an \char`\"{}\-X\-M\-O\-D\-E\-M\char`\"{} C\-R\-C.
\item Use an initial value of 0x\-F\-F\-F\-F to generate a \char`\"{}\-F\-A\-L\-S\-E C\-C\-I\-T\-T\char`\"{} C\-R\-C.
\end{DoxyItemize}

\begin{DoxyReturn}{Returns}
C\-R\-C-\/16, without reflection, for {\itshape length} bytes of {\itshape data}, using {\itshape current} as the starting C\-R\-C and 0x1021 as a polynomial.
\end{DoxyReturn}
\begin{DoxySeeAlso}{See Also}
\href{http://regregex.bbcmicro.net/crc-catalogue.htm#appendix.a}{\tt http\-://regregex.\-bbcmicro.\-net/crc-\/catalogue.\-htm\#appendix.\-a} 
\end{DoxySeeAlso}


References data, and F\-A\-R.

\hypertarget{group__util__xmodem_gaa71f0823f6fc8db3f7c556819079b225}{\index{X\-M\-O\-D\-E\-M code used by the firmware update process@{X\-M\-O\-D\-E\-M code used by the firmware update process}!xbee\-\_\-xmodem\-\_\-set\-\_\-source@{xbee\-\_\-xmodem\-\_\-set\-\_\-source}}
\index{xbee\-\_\-xmodem\-\_\-set\-\_\-source@{xbee\-\_\-xmodem\-\_\-set\-\_\-source}!XMODEM code used by the firmware update process@{X\-M\-O\-D\-E\-M code used by the firmware update process}}
\subsubsection[{xbee\-\_\-xmodem\-\_\-set\-\_\-source}]{\setlength{\rightskip}{0pt plus 5cm}int xbee\-\_\-xmodem\-\_\-set\-\_\-source (
\begin{DoxyParamCaption}
\item[{{\bf xbee\-\_\-xmodem\-\_\-state\-\_\-t} $\ast$}]{xbxm, }
\item[{void {\bf F\-A\-R} $\ast$}]{buffer, }
\item[{{\bf xbee\-\_\-xmodem\-\_\-read\-\_\-fn}}]{read, }
\item[{const void {\bf F\-A\-R} $\ast$}]{context}
\end{DoxyParamCaption}
)}}\label{group__util__xmodem_gaa71f0823f6fc8db3f7c556819079b225}


Configure the data source for the Xmodem send. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt out}  & {\em xbxm} & state structure to configure \\
\hline
\mbox{\tt in}  & {\em buffer} & buffer for use by xbee\-\_\-xmodem\-\_\-tx\-\_\-tick -- must be at least 5 bytes larger than the block size passed to \hyperlink{group__util__xmodem_gabc8da474bce7043eef3537bd492c5123}{xbee\-\_\-xmodem\-\_\-tx\-\_\-init()} \\
\hline
\mbox{\tt in}  & {\em read} & function used to read bytes to send to the target \\
\hline
\mbox{\tt in}  & {\em context} & context passed to {\ttfamily read} function\\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em 0} & successfully configured data source \\
\hline
{\em -\/\-E\-I\-N\-V\-A\-L} & invalid parameter passed in \\
\hline
\end{DoxyRetVals}


References xbee\-\_\-xmodem\-\_\-state\-\_\-t\-::buffer, xbee\-\_\-xmodem\-\_\-state\-\_\-t\-::context, E\-I\-N\-V\-A\-L, F\-A\-R, xbee\-\_\-xmodem\-\_\-state\-\_\-t\-::file, and xbee\-\_\-xmodem\-\_\-state\-\_\-t\-::read.



Referenced by xbee\-\_\-fw\-\_\-install\-\_\-ebl\-\_\-tick().

\hypertarget{group__util__xmodem_ga3153bea635e130326e96720fe354852d}{\index{X\-M\-O\-D\-E\-M code used by the firmware update process@{X\-M\-O\-D\-E\-M code used by the firmware update process}!xbee\-\_\-xmodem\-\_\-set\-\_\-stream@{xbee\-\_\-xmodem\-\_\-set\-\_\-stream}}
\index{xbee\-\_\-xmodem\-\_\-set\-\_\-stream@{xbee\-\_\-xmodem\-\_\-set\-\_\-stream}!XMODEM code used by the firmware update process@{X\-M\-O\-D\-E\-M code used by the firmware update process}}
\subsubsection[{xbee\-\_\-xmodem\-\_\-set\-\_\-stream}]{\setlength{\rightskip}{0pt plus 5cm}int xbee\-\_\-xmodem\-\_\-set\-\_\-stream (
\begin{DoxyParamCaption}
\item[{{\bf xbee\-\_\-xmodem\-\_\-state\-\_\-t} $\ast$}]{xbxm, }
\item[{{\bf xbee\-\_\-xmodem\-\_\-read\-\_\-fn}}]{read, }
\item[{{\bf xbee\-\_\-xmodem\-\_\-write\-\_\-fn}}]{write, }
\item[{const void {\bf F\-A\-R} $\ast$}]{context}
\end{DoxyParamCaption}
)}}\label{group__util__xmodem_ga3153bea635e130326e96720fe354852d}


Configure the stream used to communicate with the target. 

Associates function pointers and a context that are used to send data to and receive data from the target (device receiving data via Xmodem).


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt out}  & {\em xbxm} & state structure to configure \\
\hline
\mbox{\tt in}  & {\em read} & function used to read bytes from the target \\
\hline
\mbox{\tt in}  & {\em write} & function used to send bytes to the target \\
\hline
\mbox{\tt in}  & {\em context} & context passed to {\ttfamily read} and {\ttfamily write} functions\\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em 0} & successfully configured communication path to target \\
\hline
{\em -\/\-E\-I\-N\-V\-A\-L} & invalid parameter passed in\\
\hline
\end{DoxyRetVals}
\begin{DoxySeeAlso}{See Also}
\hyperlink{group__xbee__ota__client_ga4805b029d840b86133ef62d64866c6af}{xbee\-\_\-ota\-\_\-init}, \hyperlink{group__util__xmodem_ga728dd61f38b5563fe2ab45bcb982a1e7}{xbee\-\_\-xmodem\-\_\-use\-\_\-serport} 
\end{DoxySeeAlso}


References xbee\-\_\-xmodem\-\_\-state\-\_\-t\-::context, E\-I\-N\-V\-A\-L, F\-A\-R, xbee\-\_\-xmodem\-\_\-state\-\_\-t\-::read, xbee\-\_\-xmodem\-\_\-state\-\_\-t\-::stream, and xbee\-\_\-xmodem\-\_\-state\-\_\-t\-::write.



Referenced by xbee\-\_\-ota\-\_\-init(), and xbee\-\_\-xmodem\-\_\-use\-\_\-serport().

\hypertarget{group__util__xmodem_gabc8da474bce7043eef3537bd492c5123}{\index{X\-M\-O\-D\-E\-M code used by the firmware update process@{X\-M\-O\-D\-E\-M code used by the firmware update process}!xbee\-\_\-xmodem\-\_\-tx\-\_\-init@{xbee\-\_\-xmodem\-\_\-tx\-\_\-init}}
\index{xbee\-\_\-xmodem\-\_\-tx\-\_\-init@{xbee\-\_\-xmodem\-\_\-tx\-\_\-init}!XMODEM code used by the firmware update process@{X\-M\-O\-D\-E\-M code used by the firmware update process}}
\subsubsection[{xbee\-\_\-xmodem\-\_\-tx\-\_\-init}]{\setlength{\rightskip}{0pt plus 5cm}int xbee\-\_\-xmodem\-\_\-tx\-\_\-init (
\begin{DoxyParamCaption}
\item[{{\bf xbee\-\_\-xmodem\-\_\-state\-\_\-t} $\ast$}]{xbxm, }
\item[{{\bf uint16\-\_\-t}}]{flags}
\end{DoxyParamCaption}
)}}\label{group__util__xmodem_gabc8da474bce7043eef3537bd492c5123}


Initialize state structure for use with \hyperlink{group__util__xmodem_ga1de6d8cc3628767d877e854f92ab2b0e}{xbee\-\_\-xmodem\-\_\-tx\-\_\-tick()} to send a file via Xmodem. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt out}  & {\em xbxm} & state structure to initialize \\
\hline
\mbox{\tt in}  & {\em flags} & one of the following macros, indicating the block size to use for the transfer
\begin{DoxyItemize}
\item X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-F\-L\-A\-G\-\_\-\-N\-O\-N\-E
\item X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-F\-L\-A\-G\-\_\-64
\item X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-F\-L\-A\-G\-\_\-128
\item X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-F\-L\-A\-G\-\_\-1024
\end{DoxyItemize}\\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em -\/\-E\-I\-N\-V\-A\-L} & invalid parameter passed in \\
\hline
{\em 0} & initialized state, can pass it to xbee\-\_\-xmodem\-\_\-tx\-\_\-tick\\
\hline
\end{DoxyRetVals}
\begin{DoxySeeAlso}{See Also}
\hyperlink{group__xbee__ota__client_ga4805b029d840b86133ef62d64866c6af}{xbee\-\_\-ota\-\_\-init} 
\end{DoxySeeAlso}


References E\-I\-N\-V\-A\-L, xbee\-\_\-xmodem\-\_\-state\-\_\-t\-::flags, xbee\-\_\-xmodem\-\_\-state\-\_\-t\-::packet\-\_\-num, xbee\-\_\-xmodem\-\_\-state\-\_\-t\-::state, X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-F\-L\-A\-G\-\_\-\-U\-S\-E\-R, and X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-S\-T\-A\-R\-T.



Referenced by xbee\-\_\-fw\-\_\-install\-\_\-ebl\-\_\-tick(), and xbee\-\_\-ota\-\_\-init().

\hypertarget{group__util__xmodem_ga1de6d8cc3628767d877e854f92ab2b0e}{\index{X\-M\-O\-D\-E\-M code used by the firmware update process@{X\-M\-O\-D\-E\-M code used by the firmware update process}!xbee\-\_\-xmodem\-\_\-tx\-\_\-tick@{xbee\-\_\-xmodem\-\_\-tx\-\_\-tick}}
\index{xbee\-\_\-xmodem\-\_\-tx\-\_\-tick@{xbee\-\_\-xmodem\-\_\-tx\-\_\-tick}!XMODEM code used by the firmware update process@{X\-M\-O\-D\-E\-M code used by the firmware update process}}
\subsubsection[{xbee\-\_\-xmodem\-\_\-tx\-\_\-tick}]{\setlength{\rightskip}{0pt plus 5cm}int xbee\-\_\-xmodem\-\_\-tx\-\_\-tick (
\begin{DoxyParamCaption}
\item[{{\bf xbee\-\_\-xmodem\-\_\-state\-\_\-t} $\ast$}]{xbxm}
\end{DoxyParamCaption}
)}}\label{group__util__xmodem_ga1de6d8cc3628767d877e854f92ab2b0e}


Function to drive the Xmodem send state machine. 

Call until it returns a non-\/zero result.


\begin{DoxyRetVals}{Return values}
{\em -\/\-E\-I\-N\-V\-A\-L} & invalid parameter passed in \\
\hline
{\em -\/\-E\-T\-I\-M\-E\-D\-O\-U\-T} & connection timed out waiting for data from target \\
\hline
{\em $<$0} & error on send, transfer aborted \\
\hline
{\em 0} & transfer in progress, call function again \\
\hline
{\em 1} & transfer completed successfully \\
\hline
\end{DoxyRetVals}


References \-\_\-xbee\-\_\-xmodem\-\_\-getchar(), \-\_\-xbee\-\_\-xmodem\-\_\-putchar(), xbee\-\_\-xmodem\-\_\-state\-\_\-t\-::buffer, xbee\-\_\-xmodem\-\_\-state\-\_\-t\-::context, E\-I\-N\-V\-A\-L, E\-N\-O\-D\-A\-T\-A, E\-T\-I\-M\-E\-D\-O\-U\-T, xbee\-\_\-xmodem\-\_\-state\-\_\-t\-::flags, xbee\-\_\-xmodem\-\_\-state\-\_\-t\-::offset, xbee\-\_\-xmodem\-\_\-state\-\_\-t\-::packet\-\_\-num, xbee\-\_\-xmodem\-\_\-state\-\_\-t\-::read, xbee\-\_\-xmodem\-\_\-state\-\_\-t\-::state, xbee\-\_\-xmodem\-\_\-state\-\_\-t\-::stream, xbee\-\_\-xmodem\-\_\-state\-\_\-t\-::timer, xbee\-\_\-xmodem\-\_\-state\-\_\-t\-::tries, xbee\-\_\-xmodem\-\_\-state\-\_\-t\-::write, X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-F\-L\-A\-G\-\_\-\-C\-H\-E\-C\-K\-S\-U\-M, X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-F\-L\-A\-G\-\_\-\-C\-R\-C, X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-F\-L\-A\-G\-\_\-\-F\-O\-R\-C\-E\-\_\-\-C\-R\-C, X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-E\-O\-F, X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-F\-A\-I\-L\-U\-R\-E, X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-F\-I\-N\-A\-L\-\_\-\-A\-C\-K, X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-F\-L\-U\-S\-H, X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-R\-E\-S\-E\-N\-D, X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-S\-E\-N\-D, X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-S\-E\-N\-D\-I\-N\-G, X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-S\-T\-A\-R\-T, X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-S\-U\-C\-C\-E\-S\-S, X\-B\-E\-E\-\_\-\-X\-M\-O\-D\-E\-M\-\_\-\-S\-T\-A\-T\-E\-\_\-\-W\-A\-I\-T\-\_\-\-A\-C\-K, X\-M\-O\-D\-E\-M\-\_\-\-A\-C\-K, X\-M\-O\-D\-E\-M\-\_\-\-C\-A\-N, X\-M\-O\-D\-E\-M\-\_\-\-C\-R\-C, X\-M\-O\-D\-E\-M\-\_\-\-E\-O\-T, and X\-M\-O\-D\-E\-M\-\_\-\-N\-A\-K.



Referenced by xbee\-\_\-fw\-\_\-install\-\_\-ebl\-\_\-tick().

\hypertarget{group__util__xmodem_ga728dd61f38b5563fe2ab45bcb982a1e7}{\index{X\-M\-O\-D\-E\-M code used by the firmware update process@{X\-M\-O\-D\-E\-M code used by the firmware update process}!xbee\-\_\-xmodem\-\_\-use\-\_\-serport@{xbee\-\_\-xmodem\-\_\-use\-\_\-serport}}
\index{xbee\-\_\-xmodem\-\_\-use\-\_\-serport@{xbee\-\_\-xmodem\-\_\-use\-\_\-serport}!XMODEM code used by the firmware update process@{X\-M\-O\-D\-E\-M code used by the firmware update process}}
\subsubsection[{xbee\-\_\-xmodem\-\_\-use\-\_\-serport}]{\setlength{\rightskip}{0pt plus 5cm}int xbee\-\_\-xmodem\-\_\-use\-\_\-serport (
\begin{DoxyParamCaption}
\item[{{\bf xbee\-\_\-xmodem\-\_\-state\-\_\-t} $\ast$}]{xbxm, }
\item[{{\bf xbee\-\_\-serial\-\_\-t} $\ast$}]{serport}
\end{DoxyParamCaption}
)}}\label{group__util__xmodem_ga728dd61f38b5563fe2ab45bcb982a1e7}


Used for xmodem transfers over a simple serial port. 

Associates the serial port with the \hyperlink{structxbee__xmodem__state__t}{xbee\-\_\-xmodem\-\_\-state\-\_\-t} and sets {\ttfamily stream.\-read} and {\ttfamily stream.\-write} function pointers to helper functions that read/write a serial port.

Must be called before \hyperlink{group__util__xmodem_ga1de6d8cc3628767d877e854f92ab2b0e}{xbee\-\_\-xmodem\-\_\-tx\-\_\-tick()} and either before or after \hyperlink{group__util__xmodem_gabc8da474bce7043eef3537bd492c5123}{xbee\-\_\-xmodem\-\_\-tx\-\_\-init()}.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in,out}  & {\em xbxm} & state object to configure for serial read/write \\
\hline
\mbox{\tt in}  & {\em serport} & port to use for transfer\\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em 0} & successfully associated {\ttfamily serport} with {\ttfamily xbxm} \\
\hline
{\em -\/\-E\-I\-N\-V\-A\-L} & N\-U\-L\-L parameter passed in \\
\hline
{\em $<$0} & error assigning {\ttfamily serport} to {\ttfamily xbxm} \\
\hline
\end{DoxyRetVals}
\begin{DoxySeeAlso}{See Also}
\hyperlink{group__xbee__ota__client_ga4805b029d840b86133ef62d64866c6af}{xbee\-\_\-ota\-\_\-init}, \hyperlink{group__util__xmodem_ga3153bea635e130326e96720fe354852d}{xbee\-\_\-xmodem\-\_\-set\-\_\-stream} 
\end{DoxySeeAlso}


References xbee\-\_\-xmodem\-\_\-set\-\_\-stream().



Referenced by xbee\-\_\-fw\-\_\-install\-\_\-ebl\-\_\-tick().



\subsection{Variable Documentation}
\hypertarget{group__util__xmodem_gaa91f8e864e06077c354e5f5216547758}{\index{X\-M\-O\-D\-E\-M code used by the firmware update process@{X\-M\-O\-D\-E\-M code used by the firmware update process}!context@{context}}
\index{context@{context}!XMODEM code used by the firmware update process@{X\-M\-O\-D\-E\-M code used by the firmware update process}}
\subsubsection[{context}]{\setlength{\rightskip}{0pt plus 5cm}void {\bf F\-A\-R}$\ast$ context}}\label{group__util__xmodem_gaa91f8e864e06077c354e5f5216547758}


context for file.\-read() 

context for stream.\-read \& .write 

Referenced by \-\_\-xbee\-\_\-xmodem\-\_\-getchar(), \-\_\-xbee\-\_\-xmodem\-\_\-putchar(), xbee\-\_\-xmodem\-\_\-set\-\_\-source(), xbee\-\_\-xmodem\-\_\-set\-\_\-stream(), and xbee\-\_\-xmodem\-\_\-tx\-\_\-tick().

\hypertarget{group__util__xmodem_gab903230030042c3ee444aa887b705e06}{\index{X\-M\-O\-D\-E\-M code used by the firmware update process@{X\-M\-O\-D\-E\-M code used by the firmware update process}!crc16\-\_\-table@{crc16\-\_\-table}}
\index{crc16\-\_\-table@{crc16\-\_\-table}!XMODEM code used by the firmware update process@{X\-M\-O\-D\-E\-M code used by the firmware update process}}
\subsubsection[{crc16\-\_\-table}]{\setlength{\rightskip}{0pt plus 5cm}const {\bf F\-A\-R} {\bf uint16\-\_\-t} crc16\-\_\-table\mbox{[}256\mbox{]}}}\label{group__util__xmodem_gab903230030042c3ee444aa887b705e06}


Table for X\-M\-O\-D\-E\-M and \char`\"{}\-False C\-C\-I\-T\-T\char`\"{} C\-R\-C, calculated with standard 0x1021 polynomial. 

\hypertarget{group__util__xmodem_gac73e7e9b654a58e232f8c1380cd68dfa}{\index{X\-M\-O\-D\-E\-M code used by the firmware update process@{X\-M\-O\-D\-E\-M code used by the firmware update process}!read@{read}}
\index{read@{read}!XMODEM code used by the firmware update process@{X\-M\-O\-D\-E\-M code used by the firmware update process}}
\subsubsection[{read}]{\setlength{\rightskip}{0pt plus 5cm}{\bf xbee\-\_\-xmodem\-\_\-read\-\_\-fn} read}}\label{group__util__xmodem_gac73e7e9b654a58e232f8c1380cd68dfa}


source of bytes to send 

read response bytes from target 

Referenced by \-\_\-xbee\-\_\-xmodem\-\_\-getchar(), xbee\-\_\-xmodem\-\_\-set\-\_\-source(), xbee\-\_\-xmodem\-\_\-set\-\_\-stream(), and xbee\-\_\-xmodem\-\_\-tx\-\_\-tick().

