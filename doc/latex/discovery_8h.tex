\hypertarget{discovery_8h}{\section{include/xbee/discovery.h File Reference}
\label{discovery_8h}\index{include/xbee/discovery.\-h@{include/xbee/discovery.\-h}}
}


Header for code related to \char`\"{}\-Node Discovery\char`\"{} (the A\-T\-N\-D command, 0x95 frames)  


{\ttfamily \#include \char`\"{}xbee/platform.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}xbee/device.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}wpan/types.\-h\char`\"{}}\\*
\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structxbee__node__id__t}{xbee\-\_\-node\-\_\-id\-\_\-t}
\begin{DoxyCompactList}\small\item\em parsed Node I\-D in host-\/byte-\/order and fixed length fields \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\hypertarget{group__xbee__discovery_ga0df6e63d6ccca22fcf154b6f0be46da6}{\#define \hyperlink{group__xbee__discovery_ga0df6e63d6ccca22fcf154b6f0be46da6}{X\-B\-E\-E\-\_\-\-D\-I\-S\-C\-\_\-\-M\-A\-X\-\_\-\-N\-O\-D\-E\-I\-D\-\_\-\-L\-E\-N}~20}\label{group__xbee__discovery_ga0df6e63d6ccca22fcf154b6f0be46da6}

\begin{DoxyCompactList}\small\item\em Maximum length of a Node I\-D string (A\-T\-N\-I value) (excludes null terminator). \end{DoxyCompactList}\item 
\hypertarget{group__xbee__discovery_gad01a0deb6da2cfa51bf893b93c33145b}{\#define {\bfseries X\-B\-E\-E\-\_\-\-N\-D\-\_\-\-D\-E\-V\-I\-C\-E\-\_\-\-T\-Y\-P\-E\-\_\-\-C\-O\-O\-R\-D}~0}\label{group__xbee__discovery_gad01a0deb6da2cfa51bf893b93c33145b}

\item 
\hypertarget{group__xbee__discovery_ga7b5f045986178759d39b922d9671ef58}{\#define {\bfseries X\-B\-E\-E\-\_\-\-N\-D\-\_\-\-D\-E\-V\-I\-C\-E\-\_\-\-T\-Y\-P\-E\-\_\-\-R\-O\-U\-T\-E\-R}~1}\label{group__xbee__discovery_ga7b5f045986178759d39b922d9671ef58}

\item 
\hypertarget{group__xbee__discovery_ga1d539a23a1b7f387256a706825b2ba01}{\#define {\bfseries X\-B\-E\-E\-\_\-\-N\-D\-\_\-\-D\-E\-V\-I\-C\-E\-\_\-\-T\-Y\-P\-E\-\_\-\-E\-N\-D\-D\-E\-V}~2}\label{group__xbee__discovery_ga1d539a23a1b7f387256a706825b2ba01}

\item 
\hypertarget{group__xbee__discovery_ga65247596c3705407f5f2eb73497ef5ca}{\#define {\bfseries X\-B\-E\-E\-\_\-\-N\-D\-\_\-\-S\-O\-U\-R\-C\-E\-\_\-\-E\-V\-E\-N\-T\-\_\-\-N\-O\-N\-E}~0}\label{group__xbee__discovery_ga65247596c3705407f5f2eb73497ef5ca}

\item 
\hypertarget{group__xbee__discovery_gafe8894115d7013fb820444fa2c77a12a}{\#define {\bfseries X\-B\-E\-E\-\_\-\-N\-D\-\_\-\-S\-O\-U\-R\-C\-E\-\_\-\-E\-V\-E\-N\-T\-\_\-\-P\-U\-S\-H\-B\-U\-T\-T\-O\-N}~1}\label{group__xbee__discovery_gafe8894115d7013fb820444fa2c77a12a}

\item 
\hypertarget{group__xbee__discovery_gad3637e6febeec639fd9750c40a6e7a7f}{\#define {\bfseries X\-B\-E\-E\-\_\-\-N\-D\-\_\-\-S\-O\-U\-R\-C\-E\-\_\-\-E\-V\-E\-N\-T\-\_\-\-J\-O\-I\-N\-E\-D}~2}\label{group__xbee__discovery_gad3637e6febeec639fd9750c40a6e7a7f}

\item 
\hypertarget{group__xbee__discovery_ga0e1a51031fe5f18aa5b2c5ad02bbb329}{\#define {\bfseries X\-B\-E\-E\-\_\-\-N\-D\-\_\-\-S\-O\-U\-R\-C\-E\-\_\-\-E\-V\-E\-N\-T\-\_\-\-P\-O\-W\-E\-R\-\_\-\-C\-Y\-C\-L\-E}~3}\label{group__xbee__discovery_ga0e1a51031fe5f18aa5b2c5ad02bbb329}

\item 
\#define \hyperlink{group__xbee__discovery_ga8f678e29b22812632df7d3fa3d0f951a}{X\-B\-E\-E\-\_\-\-D\-I\-S\-C\-\_\-\-D\-I\-G\-I\-\_\-\-D\-A\-T\-A\-\_\-\-C\-L\-U\-S\-T\-E\-R\-\_\-\-E\-N\-T\-R\-Y}
\begin{DoxyCompactList}\small\item\em Include xbee\-\_\-disc\-\_\-nodeid\-\_\-cluster\-\_\-handler in the cluster table for the the Digi Data endpoint. \end{DoxyCompactList}\item 
\hypertarget{group__xbee__discovery_gadfed4daf7748e615dedf036d94d9fee9}{\#define \hyperlink{group__xbee__discovery_gadfed4daf7748e615dedf036d94d9fee9}{X\-B\-E\-E\-\_\-\-F\-R\-A\-M\-E\-\_\-\-H\-A\-N\-D\-L\-E\-\_\-\-A\-T\-N\-D\-\_\-\-R\-E\-S\-P\-O\-N\-S\-E}~\{ \hyperlink{group__xbee__device_gga7753bbebaf00d6d64942f64b6ae9b7b9ae66771334070219cd098c8201936cf4a}{X\-B\-E\-E\-\_\-\-F\-R\-A\-M\-E\-\_\-\-L\-O\-C\-A\-L\-\_\-\-A\-T\-\_\-\-R\-E\-S\-P\-O\-N\-S\-E}, 0, \hyperlink{group__xbee__discovery_ga6d1190133ded980a4eeca2034508c8a5}{xbee\-\_\-disc\-\_\-atnd\-\_\-response\-\_\-handler}, N\-U\-L\-L \}}\label{group__xbee__discovery_gadfed4daf7748e615dedf036d94d9fee9}

\begin{DoxyCompactList}\small\item\em Include xbee\-\_\-disc\-\_\-atnd\-\_\-response\-\_\-handler in xbee\-\_\-frame\-\_\-handlers\mbox{[}\mbox{]}. \end{DoxyCompactList}\item 
\#define \hyperlink{group__xbee__discovery_ga11002dcf6525c8a0d1144215bebbc774}{X\-B\-E\-E\-\_\-\-F\-R\-A\-M\-E\-\_\-\-H\-A\-N\-D\-L\-E\-\_\-\-A\-O0\-\_\-\-N\-O\-D\-E\-I\-D}~\{ \hyperlink{group__xbee__device_gga7753bbebaf00d6d64942f64b6ae9b7b9a5b572839c3123f1059ec2ced643cf5d2}{X\-B\-E\-E\-\_\-\-F\-R\-A\-M\-E\-\_\-\-N\-O\-D\-E\-\_\-\-I\-D}, 0, \hyperlink{group__xbee__discovery_gac15854e05ef3f80d6ddae653065c0a40}{xbee\-\_\-disc\-\_\-nodeid\-\_\-frame\-\_\-handler}, N\-U\-L\-L \}
\begin{DoxyCompactList}\small\item\em Include xbee\-\_\-disc\-\_\-nodeid\-\_\-frame\-\_\-handler in xbee\-\_\-frame\-\_\-handlers\mbox{[}\mbox{]} (only necessary if A\-T\-A\-O is set to 0). \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef \hyperlink{group___s_x_a_ga4233297bd31be5c273d4fb0758cc54d7}{P\-A\-C\-K\-E\-D\-\_\-\-S\-T\-R\-U\-C\-T} \hyperlink{group__xbee__discovery_gaf00a7a98eff47e084bf5f8741bf41220}{xbee\-\_\-node\-\_\-id1\-\_\-t}
\begin{DoxyCompactList}\small\item\em A\-T\-M\-Y value \mbox{[}0x\-F\-F\-F\-E on Digi\-Mesh\mbox{]}. \end{DoxyCompactList}\item 
typedef \hyperlink{group___s_x_a_ga4233297bd31be5c273d4fb0758cc54d7}{P\-A\-C\-K\-E\-D\-\_\-\-S\-T\-R\-U\-C\-T} \hyperlink{group__xbee__discovery_ga4c7c2f1049e4dc4bb4552269077cf4fc}{xbee\-\_\-node\-\_\-id2\-\_\-t}
\begin{DoxyCompactList}\small\item\em A\-T\-M\-P value \mbox{[}0x\-F\-F\-F\-E on Digi\-Mesh\mbox{]}. \end{DoxyCompactList}\item 
typedef \hyperlink{group___s_x_a_ga4233297bd31be5c273d4fb0758cc54d7}{P\-A\-C\-K\-E\-D\-\_\-\-S\-T\-R\-U\-C\-T} \hyperlink{group__xbee__discovery_ga6343d5dfdcee86d1d294b1bafb8d6f23}{xbee\-\_\-frame\-\_\-node\-\_\-id\-\_\-t}
\begin{DoxyCompactList}\small\item\em format of 0x95 frames received from X\-Bee \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{group__xbee__discovery_ga1efd48449a49119fc19ab9843af5ef6c}{xbee\-\_\-disc\-\_\-nd\-\_\-parse} (\hyperlink{structxbee__node__id__t}{xbee\-\_\-node\-\_\-id\-\_\-t} \hyperlink{group__hal_gaef060b3456fdcc093a7210a762d5f2ed}{F\-A\-R} $\ast$parsed, const void \hyperlink{group__hal_gaef060b3456fdcc093a7210a762d5f2ed}{F\-A\-R} $\ast$source, int source\-\_\-length)
\begin{DoxyCompactList}\small\item\em Parse a Node Discovery response and store it in an \hyperlink{structxbee__node__id__t}{xbee\-\_\-node\-\_\-id\-\_\-t} structure. \end{DoxyCompactList}\item 
void \hyperlink{group__xbee__discovery_gab155a485a9aa4870a45dd86d1d468c52}{xbee\-\_\-disc\-\_\-node\-\_\-id\-\_\-dump} (const \hyperlink{structxbee__node__id__t}{xbee\-\_\-node\-\_\-id\-\_\-t} \hyperlink{group__hal_gaef060b3456fdcc093a7210a762d5f2ed}{F\-A\-R} $\ast$ni)
\begin{DoxyCompactList}\small\item\em Debugging function used to dump an \hyperlink{structxbee__node__id__t}{xbee\-\_\-node\-\_\-id\-\_\-t} structure to stdout. \end{DoxyCompactList}\item 
const char $\ast$ \hyperlink{group__xbee__discovery_ga8eb851e497917304412328f434af7c95}{xbee\-\_\-disc\-\_\-device\-\_\-type\-\_\-str} (\hyperlink{group__hal_gae1affc9ca37cfb624959c866a73f83c2}{uint8\-\_\-t} \hyperlink{group__xbee__discovery_gab9c960832b7e834e6657e0c6ab4c3d8a}{device\-\_\-type})
\begin{DoxyCompactList}\small\item\em Return a string (\char`\"{}\-Coord\char`\"{}, \char`\"{}\-Router\char`\"{}, \char`\"{}\-End\-Dev\char`\"{}, or \char`\"{}???\char`\"{}) description for the \char`\"{}\-Device Type\char`\"{} field of a Node I\-D message. \end{DoxyCompactList}\item 
int \hyperlink{group__xbee__discovery_ga20bc82e8efc243e295c99c23948bed3b}{xbee\-\_\-disc\-\_\-nodeid\-\_\-cluster\-\_\-handler} (const \hyperlink{structwpan__envelope__t}{wpan\-\_\-envelope\-\_\-t} \hyperlink{group__hal_gaef060b3456fdcc093a7210a762d5f2ed}{F\-A\-R} $\ast$envelope, void \hyperlink{group__hal_gaef060b3456fdcc093a7210a762d5f2ed}{F\-A\-R} $\ast$context)
\begin{DoxyCompactList}\small\item\em Process messages sent to the Node I\-D Message cluster (0x0095) of the Digi Data endpoint (0x\-E8) when A\-T\-A\-O != 0. \end{DoxyCompactList}\item 
int \hyperlink{group__xbee__discovery_ga6d1190133ded980a4eeca2034508c8a5}{xbee\-\_\-disc\-\_\-atnd\-\_\-response\-\_\-handler} (\hyperlink{structxbee__dev__t}{xbee\-\_\-dev\-\_\-t} $\ast$xbee, const void \hyperlink{group__hal_gaef060b3456fdcc093a7210a762d5f2ed}{F\-A\-R} $\ast$raw, \hyperlink{group__hal_ga5a8b2dc9e45a9ee81a94ef304fb62505}{uint16\-\_\-t} \hyperlink{group__zdo_gab2b3adeb2a67e656ff030b56727fd0ac}{length}, void \hyperlink{group__hal_gaef060b3456fdcc093a7210a762d5f2ed}{F\-A\-R} $\ast$context)
\begin{DoxyCompactList}\small\item\em Process A\-T Command Response frames (type 0x88), looking for A\-T\-N\-D responses to parse and pass to Node I\-D handlers. \end{DoxyCompactList}\item 
int \hyperlink{group__xbee__discovery_gac15854e05ef3f80d6ddae653065c0a40}{xbee\-\_\-disc\-\_\-nodeid\-\_\-frame\-\_\-handler} (\hyperlink{structxbee__dev__t}{xbee\-\_\-dev\-\_\-t} $\ast$xbee, const void \hyperlink{group__hal_gaef060b3456fdcc093a7210a762d5f2ed}{F\-A\-R} $\ast$raw, \hyperlink{group__hal_ga5a8b2dc9e45a9ee81a94ef304fb62505}{uint16\-\_\-t} \hyperlink{group__zdo_gab2b3adeb2a67e656ff030b56727fd0ac}{length}, void \hyperlink{group__hal_gaef060b3456fdcc093a7210a762d5f2ed}{F\-A\-R} $\ast$context)
\begin{DoxyCompactList}\small\item\em Process Node Identification frames (type 0x95), sent when A\-T\-A\-O = 0. \end{DoxyCompactList}\item 
int \hyperlink{group__xbee__discovery_ga59a0294fbcb1b9f43b8436d4ec3a5a9e}{xbee\-\_\-disc\-\_\-add\-\_\-node\-\_\-id\-\_\-handler} (\hyperlink{structxbee__dev__t}{xbee\-\_\-dev\-\_\-t} $\ast$xbee, \hyperlink{group__xbee__device_ga55de36532265a72bffa969d5353800d7}{xbee\-\_\-disc\-\_\-node\-\_\-id\-\_\-fn} fn)
\begin{DoxyCompactList}\small\item\em Designate a function to receive parsed Node I\-D messages on a given X\-Bee device. \end{DoxyCompactList}\item 
int \hyperlink{group__xbee__discovery_ga091ae347ddae0bd1b54948714e9d6933}{xbee\-\_\-disc\-\_\-remove\-\_\-node\-\_\-id\-\_\-handler} (\hyperlink{structxbee__dev__t}{xbee\-\_\-dev\-\_\-t} $\ast$xbee, \hyperlink{group__xbee__device_ga55de36532265a72bffa969d5353800d7}{xbee\-\_\-disc\-\_\-node\-\_\-id\-\_\-fn} fn)
\begin{DoxyCompactList}\small\item\em Remove a function registered to receive parsed Node I\-D messages on a given X\-Bee device. \end{DoxyCompactList}\item 
int \hyperlink{group__xbee__discovery_ga12d6a10c8348cf5eb9636bbf02420dd3}{xbee\-\_\-disc\-\_\-discover\-\_\-nodes} (\hyperlink{structxbee__dev__t}{xbee\-\_\-dev\-\_\-t} $\ast$xbee, const char $\ast$identifier)
\begin{DoxyCompactList}\small\item\em Send an A\-T\-N\-D command to the X\-Bee, initiating node discovery for all nodes or a specific node's \char`\"{}node identification\char`\"{} (A\-T\-N\-I) string. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\hypertarget{group__xbee__discovery_ga719f89263ecae9f127dc655c1c14fdac}{\hyperlink{unionaddr64}{addr64} \hyperlink{group__xbee__discovery_ga719f89263ecae9f127dc655c1c14fdac}{ieee\-\_\-addr\-\_\-be}}\label{group__xbee__discovery_ga719f89263ecae9f127dc655c1c14fdac}

\begin{DoxyCompactList}\small\item\em A\-T\-S\-H and A\-T\-S\-L. \end{DoxyCompactList}\item 
\hypertarget{group__xbee__discovery_gaa667bab3abb953bc14d9f5bcc36644b8}{char \hyperlink{group__xbee__discovery_gaa667bab3abb953bc14d9f5bcc36644b8}{node\-\_\-info} \mbox{[}\hyperlink{group__xbee__discovery_ga0df6e63d6ccca22fcf154b6f0be46da6}{X\-B\-E\-E\-\_\-\-D\-I\-S\-C\-\_\-\-M\-A\-X\-\_\-\-N\-O\-D\-E\-I\-D\-\_\-\-L\-E\-N}+1\mbox{]}}\label{group__xbee__discovery_gaa667bab3abb953bc14d9f5bcc36644b8}

\begin{DoxyCompactList}\small\item\em null-\/terminated A\-T\-N\-I value (variable length) \end{DoxyCompactList}\item 
\hypertarget{group__xbee__discovery_gab9c960832b7e834e6657e0c6ab4c3d8a}{\hyperlink{group__hal_gae1affc9ca37cfb624959c866a73f83c2}{uint8\-\_\-t} \hyperlink{group__xbee__discovery_gab9c960832b7e834e6657e0c6ab4c3d8a}{device\-\_\-type}}\label{group__xbee__discovery_gab9c960832b7e834e6657e0c6ab4c3d8a}

\begin{DoxyCompactList}\small\item\em one of X\-B\-E\-E\-\_\-\-N\-D\-\_\-\-D\-E\-V\-I\-C\-E\-\_\-$\ast$ macro values \end{DoxyCompactList}\item 
\hypertarget{group__xbee__discovery_ga0fb7817a87e8f275a4313c6629d189c7}{\hyperlink{group__hal_gae1affc9ca37cfb624959c866a73f83c2}{uint8\-\_\-t} \hyperlink{group__xbee__discovery_ga0fb7817a87e8f275a4313c6629d189c7}{source\-\_\-event}}\label{group__xbee__discovery_ga0fb7817a87e8f275a4313c6629d189c7}

\begin{DoxyCompactList}\small\item\em event that generated the N\-D frame \end{DoxyCompactList}\item 
\hypertarget{group__xbee__discovery_ga4de8649ccb3a83bd14fc5702328bb667}{\hyperlink{group__hal_ga5a8b2dc9e45a9ee81a94ef304fb62505}{uint16\-\_\-t} \hyperlink{group__xbee__discovery_ga4de8649ccb3a83bd14fc5702328bb667}{profile\-\_\-be}}\label{group__xbee__discovery_ga4de8649ccb3a83bd14fc5702328bb667}

\begin{DoxyCompactList}\small\item\em Digi Profile I\-D (0x\-C105) \end{DoxyCompactList}\item 
\hypertarget{group__xbee__discovery_ga35abb56c1328cf62dfa8e54bc700ed19}{\hyperlink{group__hal_ga5a8b2dc9e45a9ee81a94ef304fb62505}{uint16\-\_\-t} \hyperlink{group__xbee__discovery_ga35abb56c1328cf62dfa8e54bc700ed19}{manufacturer\-\_\-be}}\label{group__xbee__discovery_ga35abb56c1328cf62dfa8e54bc700ed19}

\begin{DoxyCompactList}\small\item\em Manufacturer I\-D (0x101\-E) \end{DoxyCompactList}\item 
\hypertarget{group__xbee__discovery_ga7c278740875f8ad1696c446db22e3407}{\hyperlink{group__hal__dos_ga09a1e304d66d35dd47daffee9731edaa}{uint32\-\_\-t} \hyperlink{group__xbee__discovery_ga7c278740875f8ad1696c446db22e3407}{device\-\_\-id\-\_\-be}}\label{group__xbee__discovery_ga7c278740875f8ad1696c446db22e3407}

\begin{DoxyCompactList}\small\item\em A\-T\-D\-D of remote device \mbox{[}optional field enabled with A\-T\-N\-O on Digi\-Mesh\mbox{]}. \end{DoxyCompactList}\item 
\hypertarget{group__xbee__discovery_gafb67d818cd76cce8057affabcb1979a6}{\hyperlink{group__hal_gae1affc9ca37cfb624959c866a73f83c2}{uint8\-\_\-t} \hyperlink{group__xbee__discovery_gafb67d818cd76cce8057affabcb1979a6}{rssi}}\label{group__xbee__discovery_gafb67d818cd76cce8057affabcb1979a6}

\begin{DoxyCompactList}\small\item\em R\-S\-S\-I of packet \mbox{[}optional field enabled with A\-T\-N\-O on Digi\-Mesh\mbox{]}. \end{DoxyCompactList}\item 
\hypertarget{group__xbee__discovery_ga231e348f98931de7fde1d09f64264afc}{\hyperlink{unionaddr64}{addr64} {\bfseries ieee\-\_\-address\-\_\-be}}\label{group__xbee__discovery_ga231e348f98931de7fde1d09f64264afc}

\item 
\hypertarget{group__xbee__discovery_ga73d48563eb05cd5fcc4add79d226a3b8}{\hyperlink{group__hal_ga5a8b2dc9e45a9ee81a94ef304fb62505}{uint16\-\_\-t} {\bfseries network\-\_\-address\-\_\-be}}\label{group__xbee__discovery_ga73d48563eb05cd5fcc4add79d226a3b8}

\item 
\hypertarget{group__xbee__discovery_gaace3d640c8d449b8db1162993d259d3f}{\hyperlink{group__hal_gae1affc9ca37cfb624959c866a73f83c2}{uint8\-\_\-t} {\bfseries options}}\label{group__xbee__discovery_gaace3d640c8d449b8db1162993d259d3f}

\item 
\hypertarget{group__xbee__discovery_ga85b75c5bbcd6d39fb6e2802f35f926ff}{\hyperlink{group__xbee__discovery_gaf00a7a98eff47e084bf5f8741bf41220}{xbee\-\_\-node\-\_\-id1\-\_\-t} \hyperlink{group__xbee__discovery_ga85b75c5bbcd6d39fb6e2802f35f926ff}{node\-\_\-data}}\label{group__xbee__discovery_ga85b75c5bbcd6d39fb6e2802f35f926ff}

\begin{DoxyCompactList}\small\item\em variable-\/length data, parsed with \hyperlink{group__xbee__discovery_ga1efd48449a49119fc19ab9843af5ef6c}{xbee\-\_\-disc\-\_\-nd\-\_\-parse()} \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Header for code related to \char`\"{}\-Node Discovery\char`\"{} (the A\-T\-N\-D command, 0x95 frames) Note that Node Discovery isn't supported on X\-Bee Smart Energy firmware.

A host can initiate Node Discovery by sending an A\-T\-N\-D command to its local X\-Bee. The command can include a parameter of the N\-I string of a single node on the network to discover. See the \hyperlink{group__xbee__discovery_ga12d6a10c8348cf5eb9636bbf02420dd3}{xbee\-\_\-disc\-\_\-discover\-\_\-nodes()} A\-P\-I for sending this request.

Responses come in as A\-T Command Response frames (type 0x88) containing a Node I\-D message.

Additionally, nodes on a network will broadcast unsolicited (i.\-e., not in response to an A\-T\-N\-D command) Node I\-D messages to the rest of the network in two instances\-:

1) The device has A\-T\-J\-N set to 1, and it has just joined the network.

2) The user has configured D0 as the commissioning button, and presses the commissioning button once.

The receiving node will pass the message on to the host in one of two ways\-:

1) If A\-O is set to 0, the host receives a Node I\-D frame (type 0x95).

2) If A\-O is non-\/zero, the host receives an Explicit Rx frame (type 0x91) for the Node I\-D Message cluster (0x0095) of the Digi Data endpoint (0x\-E8).

This library provides an A\-P\-I layer for handling these responses. The host needs to follow these steps to receive N\-O\-D\-E I\-D messages.

1) Write a function to receive the messages, with the following signature\-: void node\-\_\-discovered( xbee\-\_\-dev\-\_\-t $\ast$xbee, const xbee\-\_\-node\-\_\-id\-\_\-t $\ast$rec)

2) Register that function at startup to receive messages\-: xbee\-\_\-disc\-\_\-add\-\_\-node\-\_\-id\-\_\-handler( \&my\-\_\-xbee, \&node\-\_\-discovered);

3) Include the A\-T\-N\-D Response handler in the xbee\-\_\-frame\-\_\-handlers table using the macro X\-B\-E\-E\-\_\-\-F\-R\-A\-M\-E\-\_\-\-H\-A\-N\-D\-L\-E\-\_\-\-A\-T\-N\-D\-\_\-\-R\-E\-S\-P\-O\-N\-S\-E.

4) If using a module with A\-T\-A\-O set to 0, include the Node I\-D handler in the xbee\-\_\-frame\-\_\-handlers table using the macro X\-B\-E\-E\-\_\-\-F\-R\-A\-M\-E\-\_\-\-H\-A\-N\-D\-L\-E\-\_\-\-A\-O0\-\_\-\-N\-O\-D\-E\-I\-D.

5) If using a module with A\-T\-A\-O set to 1 or 3, include the Node I\-D Cluster handler in the Digi Data endpoint's cluster table, using the X\-B\-E\-E\-\_\-\-D\-I\-S\-C\-\_\-\-D\-I\-G\-I\-\_\-\-D\-A\-T\-A\-\_\-\-C\-L\-U\-S\-T\-E\-R\-\_\-\-E\-N\-T\-R\-Y macro, and include the Explicit R\-X handler in the xbee\-\_\-frame\-\_\-handlers table using the macro X\-B\-E\-E\-\_\-\-F\-R\-A\-M\-E\-\_\-\-H\-A\-N\-D\-L\-E\-\_\-\-R\-X\-\_\-\-E\-X\-P\-L\-I\-C\-I\-T. 